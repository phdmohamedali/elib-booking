"use strict";var tyche={version:"1.1.1",constructor:tyche,extend:function(){let option,target=arguments[0]||{},length=arguments.length,self=this;for(let i=0;i<length;i++){let args=[];if(0===i){if(1!==length)continue;target=self,args=arguments[0]}for(option in 0===args.length&&(args=arguments[i]),args)target[option]=args[option]}return target},init:function(){void 0===String.prototype.replaceAll&&(String.prototype.replaceAll=function(match,replace){return this.replace(new RegExp(match,"g"),(()=>replace))})},orddd:{},bkap:{},ac:{},pdd:{},pif:{},cos:{},con:{},dw:{},pur:{},pgf:{},cfp:{},cpp:{},dm_1:{},dm_2:{},dm_3:{},dm_4:{},dm_5:{},dm_6:{},dm_7:{},dm_8:{},dm_9:{},dm_10:{},dm_11:{},dm_12:{},dm_13:{},dm_14:{},dm_15:{},plugin_deactivation:{fn:{return:function(data,index,return_value=""){return void 0!==data[index]&&""!==data[index]?""!==return_value?return_value:data[index]:""}},modal:function($plugin,$data){if(""===tyche.plugin_deactivation.fn.return($data,"deactivation_data")||""===tyche.plugin_deactivation.fn.return($data,"nonce"))return"";let data=$data.deactivation_data,nonce=$data.nonce;if(void 0===data.template||void 0===data.reasons)return"";let template=data.template,reasons=data.reasons,html="";if(Array.isArray(reasons)&&reasons.length>0){reasons.forEach((function(item){html+=`\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclass="reason${tyche.plugin_deactivation.fn.return(item,"input_type"," has-input")}${tyche.plugin_deactivation.fn.return(item,"html"," has-html")}"\n\t\t\t\t\t\t\tdata-input-type="${tyche.plugin_deactivation.fn.return(item,"input_type")}"\n\t\t\t\t\t\t\tdata-input-placeholder="${tyche.plugin_deactivation.fn.return(item,"input_placeholder")}">\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<input type="radio" name="selected-reason" value="${tyche.plugin_deactivation.fn.return(item,"id")}" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t${tyche.plugin_deactivation.fn.return(item,"text")}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t${""!==tyche.plugin_deactivation.fn.return(item,"html")?'<div class="reason_html">'+tyche.plugin_deactivation.fn.return(item,"html")+"</div>":""}\n\t\t\t\t\t\t</li>`})),html+=`<input type="hidden" name="nonce" value="${nonce}" />`;let modal=jQuery(template.replace("{PLUGIN}",$plugin).replace("{HTML}",html));return modal.appendTo(jQuery("body")),modal}},show_modal:function(modal){modal.find(".button").removeClass("disabled");let btn_deactivate=modal.find(".button-deactivate");btn_deactivate.length>0&&modal.hasClass("no-confirmation-message")&&!btn_deactivate.hasClass("allow-deactivate")&&(btn_deactivate.addClass("allow-deactivate"),modal.find(".ts-modal-panel").removeClass("active "),modal.find('[data-panel-id="reasons"]').addClass("active")),modal.addClass("active"),jQuery("body").addClass("has-ts-modal")},close_modal:function(modal){modal.removeClass("active"),jQuery("body").removeClass("has-ts-modal")},events:{listeners:function(data,modal,plugin){0!==jQuery(`.${plugin}.ts-slug`).prev("a")&&jQuery(`.${plugin}.ts-slug`).prev("a").on("click",(function(e){e.preventDefault(),tyche.plugin_deactivation.show_modal(modal)})),modal.on("click",".button-deactivate",(function(e){e.preventDefault(),tyche.plugin_deactivation.events.button_submit(this,data,plugin)})),modal.on("click",'input[type="radio"]',(function(){tyche.plugin_deactivation.events.button_option_selection(this,modal)})),modal.on("click",(function(e){tyche.plugin_deactivation.events.button_click_outside_window(e,modal)}))},button_submit:function($this,$data,plugin){if(jQuery($this).hasClass("disabled")||!jQuery($this).hasClass("allow-deactivate"))return;let modal=jQuery($this).parents(`.${plugin}.ts-modal`),option=jQuery('input[type="radio"]:checked'),reason=option.parents("li:first"),response=reason.find('textarea, input[type="text"]'),data={action:"tyche_plugin_deactivation_submit_action",reason_id:0,reason_text:"Deactivated without any option",plugin_short_name:plugin,plugin_name:jQuery(`.${plugin}.ts-slug`).attr("data-plugin"),nonce:jQuery('input[name="nonce"]').val()};0!==option.length&&(data.reason_id=option.val(),data.reason_text=reason.text().trim(),data.reason_info=0!==response.length?response.val().trim():"");let ajax_url=tyche.plugin_deactivation.fn.return($data,"ajax_url"),href=jQuery(`.${plugin}.ts-slug`).prev().prop("href");""!==ajax_url&&""!==href&&jQuery.ajax({url:ajax_url,method:"POST",data:data,beforeSend:function(){modal.find(".button-deactivate").addClass("disabled")},complete:function(){window.location.href=href}})},button_click_outside_window:function(e,modal){let target=jQuery(e.target);target.hasClass("ts-modal-body")||target.hasClass("ts-modal-footer")||!target.hasClass("button-close")&&(target.parents(".ts-modal-body").length>0||target.parents(".ts-modal-footer").length>0)||tyche.plugin_deactivation.close_modal(modal)},button_option_selection:function($this,modal){modal.find(".reason-input").remove(),jQuery($this).parents("ul#reasons-list").children("li.li-active").removeClass("li-active");let parent=jQuery($this).parents("li:first");parent.hasClass("has_html")&&parent.addClass("li-active"),parent.hasClass("has-input")&&(parent.append(jQuery(`<div class="reason-input">${"textfield"===parent.data("input-type")?'<input type="text" />':'<textarea rows="5"></textarea>'}</div>`)),parent.find("input, textarea").attr("placeholder",parent.data("input-placeholder")).focus())}}}};tyche.init();
