jQuery(document).ready((function($){$('.bkap-manual input[name="bkap_reminder_option"]').on("change",(function(){"bkap_reminder_booking"==$(this).val()?($("#reminder_product_ids").hide(),$("#reminder_booking_ids").show(),$("#reminder_order_ids").hide()):"bkap_reminder_product"==$(this).val()?($("#reminder_product_ids").show(),$("#reminder_booking_ids").hide(),$("#reminder_order_ids").hide()):"bkap_reminder_order"==$(this).val()&&($("#reminder_order_ids").show(),$("#reminder_product_ids").hide(),$("#reminder_booking_ids").hide())})),$("#button_reminder").on("click",(function(){$("#ajax_img").show();var data={booking_id:$(this).data("bookid"),action:"bkap_send_reminder_action"};$.post(bkap_reminder_params.ajax_url,data,(function(response){!1!==response&&($("#ajax_img").hide(),$(".wrap form").before('<div class="notice notice-success"><p>Reminder sent successfully</p></div>'),$(".notice-success").fadeOut(5e3))}))})),$("#bkap_reminder_test").on("click",(function(){let email_address=jQuery("#bkap_test_reminder").val();if(""==email_address)return void alert("Please enter email address.");if(email_address.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)){$("#send-test").block({message:null});var data={email_address:email_address,email_subject:jQuery("#bkap_email_subject").val(),email_heading:jQuery("#bkap_email_heading").val(),email_content:tinymce.editors.bkap_email_content.getContent(),booking_id:jQuery("#bkap_booking_id").val(),action:"bkap_reminder_test"};$.post(bkap_reminder_params.ajax_url,data,(function(response){$("#send-test").unblock(),!1!==response&&($("#bkap_reminder_message").html('<div class="notice notice-success"><p>Reminder sent successfully</p></div>'),$("#bkap_reminder_message").fadeOut(5e3))}))}else alert("Please enter valid Email Address!")})),$("#bkap_preview_reminder").on("click",(function(){var data={email_subject:jQuery("#bkap_email_subject").val(),email_heading:jQuery("#bkap_email_heading").val(),email_content:tinymce.editors.bkap_email_content.getContent(),booking_id:jQuery("#bkap_booking_id").val(),action:"bkap_preview_reminder"};$("#send-test").block({message:null}),$.post(bkap_reminder_params.ajax_url,data,(function(response){console.log(response),$(".bkap-modal").show(),$(".modal-body-content").html(response),$("#send-test").unblock()}))})),$(".bkap-header-close").on("click",(function(){$(".bkap-modal").hide()})),jQuery(document).on("click",".bkap_reminder_test",(function(){var data={email_subject:jQuery("#bkap_email_subject").val(),email_heading:jQuery("#bkap_email_heading").val(),email_content:jQuery("#bkap_email_content").val(),action:"bkap_reminder_test"};jQuery.post(bkap_settings_params.ajax_url,data,(function(response){}))})),$("#edit_bkap").on("click",(function(){$(".edit-page-booking-form").removeAttr("style"),$("#edit_bkap").hide()})),$("#bkap_save_message").on("click",(function(){let reminder_message="";reminder_message=$("#wp-bkap_reminder_message-wrap").hasClass("tmce-active")?tinyMCE.get("bkap_reminder_message").getContent():$("#bkap_reminder_message").val(),$("#ajax_img").show();var data={subject:$("#bkap_reminder_subject").val(),message:reminder_message,action:"bkap_save_reminder_message"};jQuery("#bkap_vendor_id").length>0&&(data.bkap_vendor_id=jQuery("#bkap_vendor_id").val()),$.post(bkap_reminder_params.ajax_url,data,(function(response){!1!==response&&($("#ajax_img").hide(),$(".wrap form").after('<div class="notice notice-success"><p>Message draft saved</p></div>'),$(".notice-success").fadeOut(5e3))}))})),$("#bkap_delete_reminder").on("click",(function(){var reminder_url=$("#bkap_reminder_url").val(),data={reminder_id:$("#bkap_reminder_id").val(),action:"bkap_delete_reminder"};$("#bkap_delete_reminder").prop("disabled",!0),$.post(bkap_reminder_params.ajax_url,data,(function(response){$("#bkap_delete_reminder").html(bkap_reminder_params.moved_to_trash),setTimeout((function(){window.location.replace(reminder_url)}),1e3)}))})),(jQuery("#bkap_reminder_order_id").length>0||jQuery("#bkap_reminder_booking_id").length>0||jQuery("#bkap_reminder_product_id").length>0)&&jQuery("#bkap_reminder_order_id, #bkap_reminder_booking_id, #bkap_reminder_product_id").select2({allowClear:!0}),jQuery("#bkap_products").length>0&&jQuery("#bkap_products").select2({allowClear:!1,placeholder:"Select products...",width:"100%"}),jQuery("#bkap_test_sms").on("click",(function(){jQuery("#send_ajax_img").show();var data={number:jQuery("#bkap_test_number").val(),msg:jQuery("#bkap_test_msg").val(),action:"bkap_test_sms"};jQuery("#bkap_vendor_id").length>0&&(data.bkap_vendor_id=jQuery("#bkap_vendor_id").val()),jQuery.post(bkap_reminder_params.ajax_url,data,(function(response){jQuery("#send_ajax_img").hide();var message=JSON.parse(response);jQuery("#status_msg").html(message),jQuery("#status_msg").css("display","block"),jQuery("#status_msg").fadeOut(8e3)}))})),jQuery(".bkap-customer-search").length>0&&jQuery(".bkap-customer-search, #bkap_product_id").select2({allowClear:!0})}));
