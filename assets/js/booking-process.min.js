var bkap_process_init=function($,bkap_process_params){var global_settings=bkap_functions.global_settings(),bkap_settings=bkap_functions.bkap_settings(),settings=bkap_functions.settings(),add_to_cart_labels=bkap_process_params.add_to_cart_labels;if(calendar_type="",checkin_class="",checkout_class="",datepicker_options={},window.MODAL_ID="",window.MODAL_FORM_ID="",window.MODAL_DATE_ID="",window.MODAL_END_DATE_ID="",$("#modal-body-"+bkap_process_params.bkap_cart_item_key).length&&(MODAL_ID="#modal-body-"+bkap_process_params.bkap_cart_item_key+" ",MODAL_FORM_ID=MODAL_ID+"#bkap-booking-form ",MODAL_DATE_ID=MODAL_FORM_ID+"#bkap_start_date ",MODAL_END_DATE_ID=MODAL_FORM_ID+"#bkap_end_date "),"on"===bkap_settings.enable_inline_calendar)calendar_type="inline",checkin_class=MODAL_DATE_ID+"#inline_calendar",checkout_class=MODAL_END_DATE_ID+"#inline_calendar_checkout";else{if(calendar_type="normal",checkin_class=MODAL_DATE_ID+"#booking_calender",checkout_class=MODAL_END_DATE_ID+"#booking_calender_checkout",0==jQuery(checkin_class).length)return!1;void 0!==jQuery(MODAL_ID+"#wapbk_widget_search").val()&&1==jQuery(MODAL_ID+"#wapbk_widget_search").val()&&"on"===bkap_settings.booking_enable_multiple_day?bkap_functions.bkap_init():void 0!==jQuery(MODAL_ID+"#wapbk_widget_search").val()&&1==jQuery(MODAL_ID+"#wapbk_widget_search").val()&&"on"===bkap_settings.booking_enable_multiple_day&&void 0!==bkap_settings.booking_fixed_block_enable&&"booking_fixed_block_enable"===bkap_settings.booking_fixed_block_enable&&bkap_functions.test_bkap_init()}$.datepicker._selectDay=function(id,month,year,td){var inst,target=$(id);"#inline_calendar"===id||"#booking_calender"===id?target=$(MODAL_DATE_ID+id):"#inline_calendar_checkout"!==id&&"#booking_calender_checkout"!==id||(target=$(MODAL_END_DATE_ID+id)),$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||((inst=this._getInst(target[0])).selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},$.datepicker._selectDate=function(id,dateStr){var onSelect,target=$(id);"#inline_calendar"===id||"#booking_calender"===id?target=$(MODAL_DATE_ID+id):"#inline_calendar_checkout"!==id&&"#booking_calender_checkout"!==id||(target=$(MODAL_END_DATE_ID+id));var inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),(onSelect=this._get(inst,"onSelect"))?(jQuery("#time_slot").val(""),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.trigger("focus"),this._lastInput=null)},$.datepicker._adjustDate=function(id,offset,period){var target=$(id);"#inline_calendar"===id||"#booking_calender"===id?target=$(MODAL_DATE_ID+id):"#inline_calendar_checkout"!==id&&"#booking_calender_checkout"!==id||(target=$(MODAL_END_DATE_ID+id));var inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset,period),this._updateDatepicker(inst))},bkap_functions.bkap_hide_loader(MODAL_ID),jQuery("form.cart").on("change","input.qty",(function(){(jQuery(this).val()>=1||"grouped"==settings.product_type)&&("on"==bkap_settings.booking_enable_multiple_day?""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()?bkap_single_day_price():"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings))})),"bundle"===settings.product_type||"composite"===settings.product_type?(jQuery(".bundled_product_checkbox").length>0&&jQuery(document).on("click",".bundled_product_checkbox",(function(){"on"==bkap_settings.booking_enable_multiple_day?""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()?bkap_single_day_price():"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings)})),jQuery(".component_options_select").length>0&&jQuery(".component_options_select").on("change",(function(){"on"==bkap_settings.booking_enable_multiple_day?""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()?bkap_single_day_price():"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings)}))):"variable"===settings.product_type&&jQuery(document).on("change","select"+bkap_process_params.on_change_attr_list,(function(){jQuery(".bundle_price").length>0&&jQuery(".bundle_price").hide(),"inline"===calendar_type&&(jQuery(checkin_class).datepicker("refresh"),jQuery(checkout_class).datepicker("refresh"));bkap_variation_value(bkap_settings,bkap_process_params);""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&bkap_calculate_price(),"inline"===calendar_type&&(""!==jQuery("#booking_calender").val()||jQuery(".ui-datepicker-current-day").hasClass("ui-state-disabled")||jQuery(".ui-datepicker-current-day").trigger("click"))})),"yes"==settings.gf_enabled&&jQuery(document).on("change",jQuery("#1"),(function(){"on"===bkap_settings.booking_enable_multiple_day?""!=jQuery("#wapbk_hidden_date").val()&&""!=jQuery("#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery("#wapbk_hidden_date").val()&&bkap_single_day_price()})),jQuery(document).on("change","select#block_option",(function(){if(""!=jQuery("#block_option").val()){var exploded_id=this.value.split("&");if(jQuery("#block_option_start_day").val(exploded_id[0]),jQuery("#block_option_number_of_day").val(exploded_id[1]),jQuery("#block_option_price").val(exploded_id[2]),jQuery("#wapbk_diff_days").val(parseInt(exploded_id[1])),"inline"===calendar_type&&(jQuery(checkin_class).datepicker("refresh"),jQuery(checkout_class).datepicker("refresh")),"on"!=bkap_settings.enable_inline_calendar&&(jQuery("#wapbk_hidden_date").val(""),jQuery("#wapbk_hidden_date_checkout").val(""),jQuery("#show_time_slot").html(""),jQuery(checkin_class).datepicker("setDate"),jQuery(checkout_class).datepicker("setDate"),bkap_functions.bkap_disable_qty_and_cart(),jQuery("#bkap_price").html(""),jQuery("#bkap_no_of_days").html("")),"on"===bkap_settings.enable_inline_calendar){jQuery("#wapbk_hidden_date").val(""),jQuery("#wapbk_hidden_date_checkout").val("");var split_date=settings.min_date.split("-");current_Date=new Date(split_date[1]+"/"+split_date[0]+"/"+split_date[2]),first_date=bkap_first_fixed_block_date(current_Date,exploded_id,bkap_settings,settings),wapbk_hidden_date=bkap_functions.bkap_create_date(first_date),jQuery("#wapbk_hidden_date").val(wapbk_hidden_date),jQuery(checkin_class).datepicker("option","minDate",first_date),jQuery(checkin_class).datepicker("setDate",first_date),void 0!==bkap_functions.bkap_init_inline&&"function"==typeof bkap_functions.bkap_init_inline&&bkap_functions.bkap_init_inline()}}}));var default_date=bkap_functions.bkap_create_date_obj(settings.default_date),variation_id=0,variation_by_name=document.getElementsByName(MODAL_ID+"variation_id").length;if(jQuery(MODAL_ID+".variation_id").length>0)if(jQuery(MODAL_ID+".variation_id").length>1){variation_id="";jQuery(MODAL_ID+".variation_id").each((function(i,obj){jQuery(obj).val()>0&&(variation_id+=jQuery(obj).val()+",")})),variation_id=variation_id.slice(0,-1)}else variation_id=jQuery(MODAL_ID+".variation_id").val();else variation_by_name>0&&(variation_id=document.getElementsByName(MODAL_ID+"variation_id")[0].value);0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id);var time_slots_arr="";"on"===bkap_settings.booking_enable_time?time_slots_arr=bkap_settings.booking_time_settings:"duration_time"===bkap_settings.booking_enable_time&&(time_slots_arr=bkap_settings.bkap_duration_settings);var on_select_date,show_day,time_slot_lockout="",attr_lockout="";if("bundle"!==settings.product_type&&"variable"===settings.product_type){var field_name="#wapbk_timeslot_lockout_"+variation_id;time_slot_lockout="";jQuery(field_name).length>0&&(time_slot_lockout=jQuery(field_name).val());attr_lockout="";if(void 0!==settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){field_name="#wapbk_timeslot_lockout_"+attribute_list[i];jQuery(field_name).length>0&&(attr_lockout=attr_lockout+attribute_list[i]+","+jQuery(field_name).val()+";")}}}if(jQuery.extend(jQuery.datepicker,{afterShow:function(event){jQuery.datepicker._getInst(event.target).dpDiv.css("z-index",9999)}}),"on"===bkap_settings.booking_enable_multiple_day?(on_select_date=bkap_set_checkin_date,show_day=bkap_functions.bkap_check_booked_dates):(on_select_date=bkap_show_times,show_day=bkap_show_book),datepicker_options={dateFormat:global_settings.booking_date_format,numberOfMonths:parseInt(global_settings.booking_months),firstDay:parseInt(global_settings.booking_calendar_day),defaultDate:default_date,beforeShowDay:show_day,onSelect:on_select_date},"on"===jQuery(MODAL_ID+"#block_option_enabled").val()&&(datepicker_options.onClose=on_close_fixed_blocks),"inline"===calendar_type){var avd_obj=bkap_avd();datepicker_options.minDate=avd_obj.minDate,datepicker_options.maxDate=avd_obj.maxDate,datepicker_options.altField=MODAL_DATE_ID+"#booking_calender",datepicker_options.regional=settings.bkap_lang}else datepicker_options.beforeShow=bkap_avd;if(jQuery(checkin_class).datepicker(datepicker_options),"on"==global_settings.booking_global_selection||"1"==jQuery("#wapbk_widget_search").val()||"inline"===calendar_type){var other_data={calendar_type:calendar_type,checkin_class:checkin_class,time_slots_arr:time_slots_arr,variation_id:variation_id,time_slot_lockout:time_slot_lockout,attr_lockout:attr_lockout};default_display_date(settings,global_settings,bkap_settings,bkap_process_params,other_data)}"normal"===calendar_type&&(jQuery("#ui-datepicker-div").wrap('<div class="hasDatepicker"></div>'),jQuery(MODAL_DATE_ID+"#checkin_cal").click((function(){jQuery(checkin_class).datepicker("show")}))),"on"===bkap_settings.booking_enable_multiple_day&&multiple_days_function(bkap_settings,global_settings,settings,checkout_class,checkin_class,calendar_type),"on"==bkap_settings.booking_purchase_without_date&&"on"==bkap_settings.booking_confirmation&&(""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()||jQuery(".single_add_to_cart_button").text(add_to_cart_labels.bkap_add_to_cart))};function bkap_first_fixed_block_date(current_date,fixed_block,bkap_settings,settings){let holidays=settings.holidays,no_of_dates_to_choose=bkap_settings.booking_maximum_number_days;for(let i=0;i<no_of_dates_to_choose;i++){let date=bkap_functions.bkap_create_date(current_date);if(!(holidays.indexOf(date)>-1))break;{let min_date=date.split("-");date=new Date(min_date[2],min_date[1]-1,min_date[0]),current_date.setDate(date.getDate()+1)}}if("any_days"==fixed_block[0])return current_date;for(i=1;i<=7;i++){if(current_date.getDay()==fixed_block[0])return current_date;current_date.setDate(current_date.getDate()+1)}return current_date}function multiple_days_function(bkap_settings,global_settings,settings,checkout_class,checkin_class,calendar_type){var min_date_co,current_dt,minDate,split,checkinDate,checkout_datepicker_options={};(current_dt=jQuery(MODAL_ID+"#wapbk_hidden_date").val())?((split=current_dt.split("-"))[1]=split[1]-1,minDate=new Date(split[2],split[1],split[0]),checkinDate=new Date(split[2],split[1],split[0])):(minDate=new Date,checkinDate="");var maxDate=new Date,maxnumber=bkap_settings.booking_maximum_number_days_multiple;if(void 0!==bkap_settings.booking_maximum_number_days_multiple&&"on"!=jQuery("#block_option_enabled").val())maxnumber=bkap_settings.booking_maximum_number_days_multiple;else if("booking_fixed_block_enable"===bkap_settings.booking_fixed_block_enable&&"on"===jQuery("#block_option_enabled").val()){let blocks_data=bkap_settings.bkap_fixed_blocks_data,blocks_days=Object.entries(blocks_data).map((function(elem){return elem[1].number_of_days}));var max_no_days=Math.max.apply(null,blocks_days);maxnumber=+bkap_settings.booking_maximum_number_days+max_no_days}if(maxDate=bkap_functions.bkap_add_days_to_date(minDate,parseInt(maxnumber)),null!=bkap_settings.booking_charge_per_day&&"on"==bkap_settings.booking_charge_per_day&&""!==bkap_settings.booking_same_day&&"on"==bkap_settings.booking_same_day)min_date_co=minDate;else if(""!==minDate&&void 0!==minDate){var enable_minimum="",minimum_multiple_day="";"on"===bkap_settings.enable_minimum_day_booking_multiple?(enable_minimum="on",minimum_multiple_day=bkap_settings.booking_minimum_number_days_multiple):void 0!==global_settings.minimum_day_booking&&"on"===global_settings.minimum_day_booking&&(enable_minimum="on",minimum_multiple_day=global_settings.global_booking_minimum_number_days),"on"==enable_minimum?(0!=minimum_multiple_day&&minimum_multiple_day||(minimum_multiple_day=1),minDate=bkap_functions.bkap_add_days_to_date(minDate,parseInt(minimum_multiple_day))):minDate.setDate(minDate.getDate()+1),min_date_co=minDate}else minDate.setDate(minDate.getDate()+1),min_date_co=minDate;checkout_datepicker_options={dateFormat:global_settings.booking_date_format,numberOfMonths:parseInt(global_settings.booking_months),firstDay:parseInt(global_settings.booking_calendar_day),minDate:min_date_co,maxDate:maxDate,onSelect:bkap_get_per_night_price,beforeShowDay:bkap_functions.bkap_check_booked_dates,onClose:function(selectedDate){jQuery(checkin_class).datepicker("option","maxDate",selectedDate)}},void 0!==bkap_settings.booking_fixed_block_enable&&"booking_fixed_block_enable"!==bkap_settings.booking_fixed_block_enable&&(checkout_datepicker_options.onSelect=bkap_get_per_night_price),"inline"===calendar_type&&(checkout_datepicker_options.altField=MODAL_END_DATE_ID+"#booking_calender_checkout"),jQuery(checkout_class).datepicker(checkout_datepicker_options).focus((function(event){jQuery.datepicker.afterShow(event)})),"on"!==global_settings.booking_global_selection&&"1"!=jQuery("#wapbk_widget_search").val()||(checkinDate&&jQuery("#block_option_enabled").val()&&"on"===jQuery("#block_option_enabled").val()&&set_checkout_mindate(checkinDate,settings,bkap_settings,global_settings,calendar_type,checkout_class),display_checkout_date(checkout_class)),"on"===bkap_settings.booking_enable_multiple_day&&"inline"===calendar_type&&bkap_functions.bkap_init_inline_multiple(global_settings,bkap_settings,settings),"normal"===calendar_type&&jQuery(MODAL_END_DATE_ID+"#checkout_cal").click((function(){jQuery(checkout_class).datepicker("show")})),"inline"===calendar_type&&(void 0!==jQuery(MODAL_ID+"#wapbk_widget_search")&&1==jQuery(MODAL_ID+"#wapbk_widget_search")&&void 0!==bkap_settings.booking_fixed_block_enable&&"booking_fixed_block_enable"===bkap_settings.booking_fixed_block_enable||void 0!==bkap_settings.booking_fixed_block_enable&&"booking_fixed_block_enable"===bkap_settings.booking_fixed_block_enable&&bkap_settings.bkap_fixed_blocks_data.length)&&bkap_functions.bkap_init_inline(),void 0!==bkap_settings.bkap_show_mode&&"on"==bkap_settings.bkap_show_mode&&"default_sale_mode"==bkap_settings.bkap_purchase_mode&&reset_booking_details()}function default_display_date(settings,global_settings,bkap_settings,bkap_process_params,other_data){if(""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&null!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()){var split=jQuery(MODAL_ID+"#wapbk_hidden_date").val().split("-");split[1]=split[1]-1;var current_dt=jQuery(MODAL_ID+"#wapbk_hidden_date").val(),CheckinDate=new Date(split[2],split[1],split[0]),timestamp=Date.parse(CheckinDate);if(0==isNaN(timestamp)){var default_date=new Date(timestamp);if(jQuery(other_data.checkin_class).datepicker("setDate",default_date),("on"==bkap_settings.booking_enable_time||"dates_time"==bkap_settings.booking_enable_time||"duration_time"==bkap_settings.booking_enable_time)&&Object.keys(other_data.time_slots_arr).length>0){if(void 0!==bkap_process_params.bkap_booking_params&&"undefined"!==bkap_process_params.bkap_booking_params.selected_duration){var duration_split=bkap_edit_params.bkap_booking_params.selected_duration.split("-");duration_split1=duration_split[0];var duration=duration_split1/bkap_settings.bkap_duration_settings.duration;jQuery(MODAL_FORM_ID+"#bkap_duration_field").val(duration)}if(MODAL_ID||bkap_process_date(current_dt),"product"!==settings.bkap_page){var data={current_date:current_dt,post_id:bkap_process_params.product_id,date_time_type:bkap_settings.booking_enable_time,variation_id:other_data.variation_id,variation_timeslot_lockout:other_data.time_slot_lockout,attribute_timeslot_lockout:other_data.attr_lockout,action:settings.method_timeslots,booking_post_id:settings.booking_post_id,bkap_page:settings.bkap_page};if("bkap_multiple_time_slot"==settings.method_timeslots&&"view-order"==settings.bkap_page){var option_value=MODAL_ID.split("-"),view_item_id="";null!=option_value[2]&&(view_item_id=option_value[2].trim()),jQuery.extend(data,{view_order_id:settings.view_order_id,view_item_id:view_item_id})}else jQuery.extend(data,{view_item_id:window.bkap_process_params.bkap_cart_item_key});jQuery(MODAL_FORM_ID+"#bkap_duration_field").length>0&&(bkap_duration=jQuery(MODAL_FORM_ID+"#bkap_duration_field").val(),jQuery.extend(data,{seleced_duration:bkap_duration})),jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(jQuery(MODAL_ID+".ajax_img").hide(),jQuery(MODAL_ID+"#bkap_no_of_days").html(""),jQuery("#cadt").remove(),jQuery(MODAL_FORM_ID+"#show_time_slot").html(response.bkap_time_dropdown),""==jQuery(MODAL_ID+"#date_time_call").val()&&bkap_time_slot_events(settings,global_settings,bkap_settings),"undefined"!=typeof bkap_edit_params){if(null!=bkap_edit_params.bkap_booking_params.time_slot&&-1!==bkap_edit_params.bkap_booking_params.time_slot.indexOf("<br>")){var time_slot_splited=bkap_edit_params.bkap_booking_params.time_slot.split("<br>");jQuery.each(jQuery('input[name="time_slot[]"]'),(function(){-1!=jQuery.inArray(jQuery(this).val(),time_slot_splited)&&(jQuery(this).prop("checked",!0),multi_timeslot(this))}))}else"list-view"==global_settings.booking_timeslot_display_mode?jQuery(".ts-grid-item > a").each((function(){bkap_edit_params.bkap_booking_params.time_slot==jQuery(this).data("value")&&(jQuery("#time_slot").val(bkap_edit_params.bkap_booking_params.time_slot),jQuery(this).parent().addClass("active_slot"),jQuery(this).trigger("click"),jQuery(this).find("input[type=radio]").attr("checked","checked"))})):jQuery(MODAL_FORM_ID+"#show_time_slot #time_slot").val(bkap_edit_params.bkap_booking_params.time_slot).change();if("duration_time"==bkap_settings.booking_enable_time){var data_a=jQuery(jQuery(MODAL_FORM_ID+"#show_time_slot .bkap-duration-block li a"));jQuery.each(data_a,(function(key,value){value.dataset.value==bkap_edit_params.bkap_booking_params.duration_time_slot&&(jQuery(this).addClass("bkap-duration-selected"),jQuery(this).click())})),null!=settings.duration_time_selected&&""!==settings.duration_time_selected&&jQuery("#duration_time_slot").val(settings.duration_time_selected)}}""!==settings.time_selected&&("list-view"==global_settings.booking_timeslot_display_mode?jQuery(".ts-grid-item > a").each((function(){settings.time_selected==jQuery(this).data("value")&&(jQuery("#time_slot").val(settings.time_selected),jQuery(this).parent().addClass("active_slot"),jQuery(this).find("input[type=radio]").attr("checked","checked"))})):(jQuery("#time_slot").val(settings.time_selected),jQuery("#time_slot").trigger("change"))),""!=settings.multiple_time_selected&&"view-order"==settings.bkap_page&&jQuery.each(jQuery('input[name="time_slot[]"]'),(function(){null!=settings.multiple_time_selected[view_item_id]&&null!=settings.multiple_time_selected[view_item_id][current_dt]&&settings.multiple_time_selected[view_item_id][current_dt].indexOf(jQuery(this).val())>=0&&jQuery(this).prop("checked",!0)}))}))}}else bkap_process_date(current_dt),setTimeout((function(){var fixed_block_selected=jQuery(MODAL_ID+"#wapbk_diff_days").val(),option_value="";fixed_block_selected&&void 0!==fixed_block_selected&&""!==fixed_block_selected&&jQuery(MODAL_FORM_ID+"#block_option option").each((function(){if((option_value=jQuery(this).val().split("&"))[1]&&option_value[1]==fixed_block_selected&&0==settings.booking_post_id)return jQuery(MODAL_FORM_ID+"#block_option").val(jQuery(this).val()),!1}))}))}}}function display_checkout_date(checkout_class){var split=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val().split("-");split[1]=split[1]-1;var CheckoutDate=new Date(split[2],split[1],split[0]),timestamp=Date.parse(CheckoutDate);if(0==isNaN(timestamp)){var default_date=new Date(timestamp);jQuery(checkout_class).datepicker("setDate",default_date),bkap_calculate_price()}return default_date}function bkap_show_book(date){var settings=bkap_functions.settings(),bkap_settings=bkap_functions.bkap_settings(),labels=bkap_functions.bkap_labels(),deliveryDates=JSON.parse("["+settings.specific_dates+"]"),holidayDates=JSON.parse("["+settings.holidays+"]"),bkap_disabled_dates=JSON.parse("["+settings.bkap_disabled_dates+"]"),dateymd=bkap_functions.bkap_create_date_ymd(date),datejny=bkap_functions.bkap_create_date(date),disabled_week_days=0;if(null!=settings.wapbk_block_checkin_weekdays)for(disabled_week_days=JSON.parse("["+settings.wapbk_block_checkin_weekdays+"]"),jjj=0;jjj<disabled_week_days.length;jjj++)if(-1!=jQuery.inArray(date.getDay(),disabled_week_days))return[!1,"bkap-blocked-date",labels.blocked_label];if(""!=settings.bkap_block_selected_weekdays){var res=settings.bkap_block_selected_weekdays.split(",");for(weekday=0;weekday<res.length;weekday++)if(-1!=jQuery.inArray(dateymd,res))return[!1,"bkap-blocked-date",labels.blocked_label]}var id_booking=jQuery(this).attr("id"),lockoutdates=JSON.parse("["+settings.wapbk_lockout_days+"]");for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(datejny,lockoutdates))return[!1,"bkap-blocked-date",labels.booked_label];if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]){var field_name="#wapbk_lockout_"+attribute_list[i];if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(",");if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(datejny,lockoutdates)&&jQuery("#"+attribute_list[i]).val()>0)return[!1,"bkap-booked-date",labels.booked_label]}}}var variation_id_selected=0,variation_by_name=document.getElementsByName("variation_id").length;if(jQuery(".variation_id").length>0?variation_id_selected=jQuery(".variation_id").val():variation_by_name>0&&(variation_id_selected=document.getElementsByName("variation_id")[0].value),0==variation_id_selected&&settings.default_var_id>0&&(variation_id_selected=settings.default_var_id),0!=variation_id_selected){field_name="#wapbk_lockout_"+variation_id_selected;if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(",");if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(datejny,lockoutdates))return[!1,"bkap-booked-date",labels.booked_label]}}if("on"==bkap_settings._bkap_resource&&null!=settings.resource_ids&&-1!=jQuery.inArray(settings.product_type,["simple","variable","subscription","variable-subscription"]))if("bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=[];for(i=0;i<settings.resource_ids.length;i++){resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates;lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]");if(null!=settings.resource_disable_dates[resource_id_selected]&&(wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],lockoutdates=lockoutdates.concat(wapbk_resource_disaabled_dates)),lockoutdates.length>0){if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)-1!=jQuery.inArray(datejny,lockoutdates)?show_rdate.push(!0):show_rdate.push(!1)}else show_rdate.push(!1)}if(0!=show_rdate.length&&-1==jQuery.inArray(!1,show_rdate))return[!1,"bkap-booked-date",labels.booked_label]}else{var resource_id_selected=0;if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0)if(""!=(resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val())&&resource_id_selected>0)if(wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],lockoutdates=(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")).concat(wapbk_resource_disaabled_dates),"booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(datejny,lockoutdates))return[!1,"bkap-booked-date",labels.booked_label]}for(ii=0;ii<holidayDates.length;ii++)if(-1!=jQuery.inArray(datejny,holidayDates))return[!1,"bkap-holiday-date",labels.holiday_label];for(ii=0;ii<bkap_disabled_dates.length;ii++)if(-1!=jQuery.inArray(datejny,bkap_disabled_dates))return[!1,"bkap-unavailable-date",labels.unavailable_label];if(settings.wapbk_hidden_booked_dates){var bookedDates=JSON.parse("["+settings.wapbk_hidden_booked_dates+"]");for(i=0;i<bookedDates.length;i++)if(-1!=jQuery.inArray(datejny,bookedDates))return[!1,"bkap-unavailable-date",labels.unavailable_label]}if("on"==bkap_settings.booking_enable_multiple_day){var bkap_rent=JSON.parse("["+settings.bkap_rent+"]");for(i=0;i<bkap_rent.length;i++)if(-1!=jQuery.inArray(datejny,bkap_rent))return[!1,"bkap-rent-date",labels.rent_label]}var in_range="";for(in_range=void 0===settings.fixed_ranges||fixed_range(date),i=0;i<deliveryDates.length;i++)if(-1!=jQuery.inArray(datejny,deliveryDates)&&1==in_range)return[!0];var day="booking_weekday_"+date.getDay();return"on"==bkap_settings.booking_recurring[day]&&1==in_range?[!0]:[!1]}function bkap_show_times(date,inst){jQuery(MODAL_ID+"#duration_time_slot").val(""),bkap_functions.bkap_disable_qty_and_cart();var monthValue=inst.selectedMonth+1,current_dt=inst.selectedDay+"-"+monthValue+"-"+inst.selectedYear;jQuery(MODAL_ID+"#wapbk_hidden_date").val(current_dt),bkap_process_date(current_dt)}function bkap_process_date(current_dt){var settings=bkap_functions.settings(),global_settings=bkap_functions.global_settings(),bkap_settings=bkap_functions.bkap_settings(),sold_individually=settings.sold_individually,wapbk_hidden_date=jQuery(MODAL_ID+"#wapbk_hidden_date").val(),date_in_selected_language=jQuery(MODAL_DATE_ID+"#booking_calender").val(),variation_id=0,variation_by_name=document.getElementsByName(MODAL_ID+"variation_id").length,variation_id_count=0,bookings_placed="",field_name="",variation_id_length=jQuery(MODAL_ID+".variation_id").length;if("simple"!=settings.product_type){if(variation_id_length>0?variation_id_length>1?(variation_id="",jQuery(MODAL_ID+".variation_id").each((function(i,obj){variation_id+=jQuery(obj).val()+",",variation_id_count++})),variation_id=variation_id.slice(0,-1)):variation_id=jQuery(MODAL_ID+".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName(MODAL_ID+"variation_id")[0].value),"0"===variation_id){let selected_option=jQuery(`select${bkap_process_params.on_change_attr_list} option:selected`).val(),variations=document.getElementsByClassName("variations_form")[0].dataset.product_variations,selector=bkap_process_params.attr_value,variation_dataset=variations?JSON.parse(variations):"",selected=String(selected_option);if(""!==selected_option&&""!==variation_dataset&&variation_dataset.length>0)for(const variation of variation_dataset)if(variation.attributes[selector]===selected&&0!==variation.variation_id&&""!==variation.variation_id){variation_id=parseInt(variation.variation_id);break}}if(0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id),""!=variation_id)if(variation_id_count>0)for(var var_sub_id in variation_id.split(","))""!==var_sub_id&&void 0!==var_sub_id&&(field_name="#wapbk_bookings_placed_"+var_sub_id,jQuery(field_name).length>0&&(bookings_placed+=jQuery(field_name).val()+","));else field_name="#wapbk_bookings_placed_"+variation_id,jQuery(field_name).length>0&&(bookings_placed=jQuery(field_name).val());var attr_bookings_placed="";if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){field_name="#wapbk_bookings_placed_"+attribute_list[i];jQuery(field_name).length>0&&(attr_bookings_placed=attr_bookings_placed+attribute_list[i]+","+jQuery(field_name).val()+";")}}}var resource_id_selected=0,bkap_resource_booking_placed="",bkap_locked_dates="",resource=!1;let product_types=["simple","variable","subscription","variable-subscription"];if("on"==bkap_settings._bkap_resource&&null!=settings.resource_ids&&-1!=jQuery.inArray(settings.product_type,product_types)){if(resource=!0,"bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=!1;for(i=0;i<settings.resource_ids.length;i++){resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates;var lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]");for(null!=settings.resource_disable_dates[resource_id_selected]&&(wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],lockoutdates=lockoutdates.concat(wapbk_resource_disaabled_dates)),iii=0;iii<lockoutdates.length;iii++)if(-1==jQuery.inArray(current_dt,lockoutdates)){show_rdate=!0;break}if(0==lockoutdates.length||1==show_rdate){resource_id_selected=resource_id_selected.toString();break}}jQuery(MODAL_FORM_ID+"#bkap_resource_label").html("<b>"+settings.bkap_resource_data[resource_id_selected].resource_title+"</b>")}else jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0&&(resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val());""!=resource_id_selected>0&&resource_id_selected>0&&(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val(resource_id_selected),bkap_resource_booking_placed=settings.bkap_booked_resource_data[resource_id_selected].bkap_booking_placed,bkap_locked_dates=settings.bkap_booked_resource_data[resource_id_selected].bkap_time_locked_dates)}var bkap_duration=0;if(jQuery(MODAL_FORM_ID+"#bkap_duration_field").length>0&&(bkap_duration=jQuery("#bkap_duration_field").val(),jQuery(MODAL_FORM_ID+"#bkap_show_stock_status").hide()),0==bkap_duration){var data={date:wapbk_hidden_date,post_id:bkap_process_params.product_id,date_fld_val:date_in_selected_language,action:"bkap_date_lockout"};if("simple"!=settings.product_type&&jQuery.extend(data,{variation_id:variation_id,bookings_placed:bookings_placed,attr_bookings_placed:attr_bookings_placed}),1==resource&&jQuery.extend(data,{resource_id:resource_id_selected,resource_bookings_placed:bkap_resource_booking_placed}),"on"==bkap_settings.bkap_person&&-1!=jQuery.inArray(settings.product_type,product_types)){let person_ids=[],total_person=0;jQuery(MODAL_FORM_ID+"#bkap_field_persons").length>0?(person_id=1,person_val=jQuery(MODAL_FORM_ID+"#bkap_field_persons").val(),""==person_val&&(person_val=0),total_person=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})):jQuery('input[id^="bkap_field_persons_"]').each((function(i,row){let person_id=jQuery(this)[0].id.split("_")[3],person_val=jQuery(this).val();""==person_val&&(person_val=0),total_person+=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})})),jQuery.extend(data,{person_ids:person_ids,total_person:total_person})}jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(response.error)jQuery(".bkap-form-error").html(response.message),jQuery("#bkap-price-box").hide(),"on"==global_settings.display_disabled_buttons?bkap_functions.bkap_disable_qty_and_cart():bkap_functions.bkap_hide_qty_and_cart();else if(jQuery("#bkap_show_stock_status").show(),"on"===global_settings.booking_availability_display&&jQuery(MODAL_FORM_ID+"#bkap_show_stock_status").html(response.message),""!=response.max_qty&&0!=response.max_qty&&"Unlimited"!=response.max_qty){var max=parseInt(response.max_qty);jQuery('input[name="quantity"]').attr("max",max)}}))}var time=!1,seleced_duration=1;if("on"===bkap_settings.booking_enable_time||"dates_time"==bkap_settings.booking_enable_time){var time_slots=bkap_settings.booking_time_settings;time=!0}else if("duration_time"===bkap_settings.booking_enable_time){time_slots=bkap_settings.bkap_duration_settings;seleced_duration=parseInt(jQuery("#bkap_duration_field").prop("value")),time=!0}if(time&&null!==time_slots.length&&void 0!==time_slots){"on"==global_settings.display_disabled_buttons?(jQuery(MODAL_ID+"#bkap_price").hide(),bkap_functions.bkap_disable_qty_and_cart()):(jQuery(MODAL_ID+"#bkap_price").hide(),bkap_functions.bkap_hide_qty_and_cart());var time_slot_lockout="",attr_lockout="";if("on"===bkap_settings.booking_enable_time){field_name="#wapbk_timeslot_lockout_"+variation_id;if(jQuery(field_name).length>0&&(time_slot_lockout=jQuery(field_name).val()),null!=settings.wapbk_attribute_list){attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){field_name="#wapbk_timeslot_lockout_"+attribute_list[i];jQuery(field_name).length>0&&(attr_lockout=attr_lockout+attribute_list[i]+","+jQuery(field_name).val()+";")}}}jQuery(MODAL_FORM_ID+"#show_time_slot").block({message:null,overlayCSS:{background:"#eee",opacity:.6}});data={current_date:current_dt,post_id:bkap_process_params.product_id,action:settings.method_timeslots,date_time_type:bkap_settings.booking_enable_time,seleced_duration:seleced_duration,bkap_page:settings.bkap_page};if(jQuery(".bkap-timezone-block").length>0&&(data.bkap_timezone_name=jQuery(".bkap-timezone-block").data("bkap-timezone-name")),"bkap_post"==settings.bkap_page&&(data.booking_post_id=settings.booking_post_id),variation_id>0&&(data.variation_id=variation_id),""!=time_slot_lockout&&(data.variation_timeslot_lockout=time_slot_lockout),""!=attr_lockout&&(data.attribute_timeslot_lockout=attr_lockout),resource_id_selected>0&&(data.resource_id=resource_id_selected,data.resource_lockoutdates=bkap_locked_dates),"bkap_multiple_time_slot"==settings.method_timeslots&&"view-order"==settings.bkap_page){var option_value=MODAL_ID.split("-"),view_item_id="";null!=option_value[2]&&(view_item_id=option_value[2].trim()),jQuery.extend(data,{view_order_id:settings.view_order_id,view_item_id:view_item_id})}jQuery.each(jQuery('input[name="time_slot[]"]'),(function(){jQuery(this).prop("checked",!1)})),jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(jQuery(MODAL_ID+".ajax_img").hide(),jQuery(MODAL_ID+"#bkap_no_of_days").html(""),jQuery("#cadt").remove(),response.bkap_time_dropdown.includes("bkap_book_time")){let dropdown=jQuery(response.bkap_time_dropdown);dropdown.filter((function(){let time_element=jQuery(this).find("label input");void 0!==time_element&&time_element.length>0&&settings.time_selected===time_element.val()&&jQuery(this).find("label input").prop("checked",!0)})),jQuery(MODAL_FORM_ID+"#show_time_slot").html(dropdown)}else jQuery(MODAL_FORM_ID+"#show_time_slot").html(response.bkap_time_dropdown);if(""==jQuery(MODAL_FORM_ID+"#date_time_call").val()&&bkap_time_slot_events(settings,global_settings,bkap_settings),"duration_time"===bkap_settings.booking_enable_time){var max_width=0,max_height=0;if(jQuery(MODAL_FORM_ID+"#show_time_slot .bkap_block a").each((function(){var width=jQuery(this).width(),height=jQuery(this).height();width>max_width&&(max_width=width),height>max_height&&(max_height=height)})),jQuery(".bkap_block a").width(max_width-1),jQuery(".bkap_block a").height(max_height),void 0!==settings.duration_time_selected&&""!==settings.duration_time_selected){jQuery("#duration_time_slot").val(settings.duration_time_selected);var data_a=jQuery(jQuery(MODAL_FORM_ID+"#show_time_slot .bkap-duration-block li a"));jQuery.each(data_a,(function(key,value){value.dataset.value==settings.duration_time_selected&&(jQuery(this).addClass("bkap-duration-selected"),jQuery(this).click())}))}}""==settings.time_selected&&1==response.bkap_time_count&&("list-view"==global_settings.booking_timeslot_display_mode?jQuery(".ts-grid-item > a").trigger("click"):jQuery(MODAL_ID+"#time_slot").trigger("change")),""!==settings.time_selected&&("list-view"==global_settings.booking_timeslot_display_mode?jQuery(".ts-grid-item > a").each((function(){settings.time_selected==jQuery(this).data("value")&&(jQuery("#time_slot").val(settings.time_selected),jQuery(this).parent().addClass("active_slot"),jQuery(this).find("input[type=radio]").attr("checked","checked"))})):jQuery("#time_slot").val(settings.time_selected)),""!=settings.multiple_time_selected&&"view-order"==settings.bkap_page&&jQuery.each(jQuery('input[name="time_slot[]"]'),(function(){null!=settings.multiple_time_selected[view_item_id]&&null!=settings.multiple_time_selected[view_item_id][current_dt]&&settings.multiple_time_selected[view_item_id][current_dt].indexOf(jQuery(this).val())>=0&&jQuery(this).prop("checked",!0)}))})),bkap_single_day_price()}else"on"!=bkap_settings.booking_enable_multiple_day&&(""!=wapbk_hidden_date?(jQuery(".payment_type").show(),"yes"==sold_individually?jQuery('.quantity input[name="quantity"]').hide():null==document.getElementById("bkap-add-days")&&jQuery('.quantity input[name="quantity"]').show()):""==wapbk_hidden_date&&(bkap_functions.bkap_disable_qty_and_cart(),jQuery(".payment_type").hide(),jQuery(".partial_message").hide()),bkap_single_day_price())}function bkap_time_slot_events_calculation(time_slot_value,date_time_type){var global_settings=bkap_functions.global_settings(),bkap_settings=bkap_functions.bkap_settings(),settings=bkap_functions.settings(),sold_individually=settings.sold_individually,variation_id=0,variation_by_name=document.getElementsByName("variation_id").length;if("simple"!=settings.product_type){if(jQuery(MODAL_ID+".variation_id").length>0)if(jQuery(MODAL_ID+".variation_id").length>1){variation_id="";jQuery(MODAL_ID+".variation_id").each((function(i,obj){""!=jQuery(obj).val()&&(variation_id+=jQuery(obj).val()+",")})),""!=variation_id&&(variation_id=variation_id.slice(0,-1))}else variation_id=jQuery(MODAL_ID+".variation_id").val();else variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value);0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id);var time_slot_bookings_placed="";if(""!=variation_id){var field_name="#wapbk_bookings_placed_"+variation_id;jQuery(field_name).length>0&&(time_slot_bookings_placed=jQuery(field_name).val())}var attr_bookings_placed="";if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){field_name="#wapbk_bookings_placed_"+attribute_list[i];jQuery(field_name).length>0&&(attr_bookings_placed=attr_bookings_placed+attribute_list[i]+","+jQuery(field_name).val()+";")}}}var resource_id_selected=0,bkap_time_booking_placed="",bkap_booking_placed="";if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0&&""!=(resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val())&&resource_id_selected>0&&(bkap_time_booking_placed=settings.bkap_booked_resource_data[resource_id_selected].bkap_time_booking_placed,bkap_booking_placed=settings.bkap_booked_resource_data[resource_id_selected].bkap_booking_placed),""!==time_slot_value&&"duration"!=date_time_type){var data={checkin_date:jQuery(MODAL_ID+"#wapbk_hidden_date").val(),timeslot_value:time_slot_value,date_time_type:date_time_type,post_id:bkap_process_params.product_id,date_fld_val:jQuery(MODAL_DATE_ID+"#booking_calender").val(),bkap_page:settings.bkap_page,action:"bkap_get_time_lockout"};let product_types=["simple","variable","subscription","variable-subscription"];if("on"==bkap_settings.bkap_person&&-1!=jQuery.inArray(settings.product_type,product_types)){let person_ids=[],total_person=0;jQuery(MODAL_FORM_ID+"#bkap_field_persons").length>0?(person_id=1,person_val=jQuery(MODAL_FORM_ID+"#bkap_field_persons").val(),""==person_val&&(person_val=0),total_person=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})):jQuery('input[id^="bkap_field_persons_"]').each((function(i,row){let person_id=jQuery(this)[0].id.split("_")[3],person_val=jQuery(this).val();""==person_val&&(person_val=0),total_person+=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})})),jQuery.extend(data,{person_ids:person_ids,total_person:total_person})}0!=variation_id&&(data.variation_id=variation_id,data.bookings_placed=time_slot_bookings_placed,data.attr_bookings_placed=attr_bookings_placed),0!=resource_id_selected&&""!=resource_id_selected&&(data.resource_id=resource_id_selected,data.resource_bookings_placed=bkap_time_booking_placed),jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(response.error)jQuery(".bkap-form-error").html(response.message),jQuery("#bkap-price-box").hide(),"on"==global_settings.display_disabled_buttons?bkap_functions.bkap_disable_qty_and_cart():bkap_functions.bkap_hide_qty_and_cart();else if("on"===global_settings.booking_availability_display&&""!=response.message&&jQuery(MODAL_FORM_ID+"#bkap_show_stock_status").html(response.message),""!=response.max_qty&&0!=response.max_qty&&"Unlimited"!=response.max_qty){var max=parseInt(response.max_qty);jQuery('input[name="quantity"]').attr("max",max)}}))}else if("duration"!=date_time_type){data={date:jQuery(MODAL_ID+"#wapbk_hidden_date").val(),post_id:bkap_process_params.product_id,date_fld_val:jQuery(MODAL_DATE_ID+"#booking_calender").val(),action:"bkap_date_lockout"};0!=variation_id&&""!=variation_id&&jQuery.extend(data,{variation_id:variation_id,bookings_placed:time_slot_bookings_placed,attr_bookings_placed:attr_bookings_placed}),0!=resource_id_selected&&""!=resource_id_selected&&jQuery.extend(data,{resource_id:resource_id_selected,resource_bookings_placed:bkap_booking_placed}),jQuery.post(bkap_process_params.ajax_url,data,(function(response){if("on"===global_settings.booking_availability_display&&""!=response.message&&jQuery(MODAL_FORM_ID+"#bkap_show_stock_status").html(response.message),""!=response.max_qty&&0!=response.max_qty&&"Unlimited"!=response.max_qty){var max=parseInt(response.max_qty);jQuery('input[name="quantity"]').attr("max",max)}}))}""!=jQuery("#time_slot").val()?(jQuery(".payment_type").show(),"yes"==sold_individually?(jQuery('.quantity input[name="quantity"]').hide(),jQuery(".payment_type").hide(),jQuery(".partial_message").hide()):(null==document.getElementById("bkap-add-days")&&jQuery('.quantity input[name="quantity"]').show(),jQuery(".payment_type").show())):""==jQuery("#time_slot").val()&&(bkap_functions.bkap_disable_qty_and_cart(),jQuery(".payment_type").hide(),jQuery(".partial_message").hide()),bkap_single_day_price()}function bkap_set_selected_time(block_picker,value){var selected_block=block_picker.find('[data-value="'+value+'"]');block_picker.closest("ul").find("a").removeClass("bkap-duration-selected"),selected_block.addClass("bkap-duration-selected")}function bkap_time_slot_events(settings,global_settings,bkap_settings){jQuery(MODAL_ID+"#date_time_call").val("called"),jQuery(MODAL_FORM_ID+"#show_time_slot").off("click"),jQuery(MODAL_FORM_ID+".show_time_slot").on("click",".bkap_block>a",(function(){var value=jQuery(this).data("value"),block_picker=jQuery(this).closest("ul");return jQuery(MODAL_ID+"#duration_time_slot").val(value),bkap_set_selected_time(block_picker,value),bkap_time_slot_events_calculation(value,"duration"),!1})),jQuery(MODAL_FORM_ID+"#show_time_slot").off("change"),jQuery(MODAL_FORM_ID+"#show_time_slot").on("change"," #time_slot",(function(){bkap_time_slot_events_calculation(jQuery("#time_slot").val(),"on")})),"duration_time"!=bkap_settings.booking_enable_time&&jQuery(MODAL_FORM_ID+"#show_time_slot").off("click"),jQuery(MODAL_FORM_ID+"#show_time_slot").on("click","li.ts-grid-item>a",(function(e){e.preventDefault(),e.stopPropagation(),jQuery.each(jQuery('input.time_slot[type="radio"]'),(function(){jQuery(this).parent().parent().removeClass("active_slot"),jQuery(this).attr("checked",!1)})),jQuery(this).find('input.time_slot[type="radio"]').attr("checked",!0),jQuery(this).parent().addClass("active_slot");var time_slot_value=jQuery(this).find('input.time_slot[type="radio"]').val();jQuery("#time_slot").val(time_slot_value),bkap_time_slot_events_calculation(time_slot_value,"on")})),jQuery(MODAL_ID+"#date_time_call").val("")}function bkap_purchase_without_date(settings){bkap_functions.bkap_disable_qty_and_cart();var variation_id=0,variation_by_name=document.getElementsByName("variation_id").length;if(jQuery(".variation_id").length>0)if(jQuery(".variation_id").length>1){variation_id="";jQuery(".variation_id").each((function(i,obj){variation_id+=jQuery(obj).val()+","}))}else variation_id=jQuery(".variation_id").val();else variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value);0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id);var quantity=bkap_functions.bkap_get_qty(),data={post_id:bkap_process_params.product_id,quantity:quantity,variation_id:variation_id,action:"bkap_purchase_wo_date_price"};jQuery.post(bkap_process_params.ajax_url,data,(function(response){null!=response.total_price_calculated&&jQuery("#total_price_calculated").html(response.total_price_calculated),null!=response.bkap_price_charged&&jQuery("#bkap_price_charged").html(response.bkap_price_charged),null!=response.bkap_no_of_days&&jQuery("#bkap_price").html(response.bkap_price),bkap_functions.bkap_enable_qty_and_cart(),bkap_functions.bkap_show_qty_and_cart()}))}function bkap_single_day_price(){jQuery(MODAL_ID+"#bkap-price-box").show(),jQuery(MODAL_ID+".bkap-form-error").html("");var settings=bkap_functions.settings(),bkap_settings=bkap_functions.bkap_settings(),bkap_labels=bkap_functions.bkap_labels(),global_settings=bkap_functions.global_settings();let product_types=["simple","variable","subscription","variable-subscription"];"variable"==settings.product_type&&"on"==global_settings.hide_variation_price&&jQuery(MODAL_FORM_ID+".woocommerce-variation-price").css("display","none");var bkap_time_slots=bkap_settings.booking_time_settings,booking_date=jQuery(MODAL_ID+"#wapbk_hidden_date").val();if(bkap_functions.bkap_disable_qty_and_cart(),jQuery("#wapbk_addon_data").length>0&&null!=bkap_settings.allow_full_payment&&"yes"==bkap_settings.allow_full_payment){var allow_full_payment="",default_payment_radio="",deposit_x_days=0,date1=new Date,date2=bkap_functions.bkap_create_date_obj(booking_date),timeDiff=Math.abs(date2.getTime()-date1.getTime()),diffDays=Math.ceil(timeDiff/864e5);allow_full_payment=bkap_settings.allow_full_payment,deposit_x_days=bkap_settings.booking_deposit_x_days,default_payment_radio=bkap_settings.booking_default_payment_radio,"full_payment"==jQuery("#wapbk_addon_data").val()&&(jQuery(".partial_message").hide(),jQuery(".payment_type.partial input:radio").prop("disabled",!1),jQuery("#wapbk_addon_data").val("full_payment")),deposit_x_days>0&&diffDays<=deposit_x_days&&(jQuery(".payment_type input:radio:not(:disabled):first-child").prop("checked",!0),jQuery(".payment_type.partial input:radio").prop("disabled",!0),jQuery("#wapbk_addon_data").val("full_payment"),jQuery(".partial_message").show())}if(jQuery("#extend_booking_calculation").length>0){var data={booking_date:booking_date,post_id:bkap_process_params.product_id,addon_data:jQuery("#extend_booking_calculation").val(),action:"bkap_js"};jQuery.post(bkap_process_params.ajax_url,data,(function(response){eval(response)}))}if("on"!=bkap_settings.booking_enable_multiple_day){var time_slot_value="";if("on"==bkap_settings.booking_enable_time||"dates_time"==bkap_settings.booking_enable_time){if(time_slot_value=jQuery("#time_slot").val(),void 0===time_slot_value){var values=[];jQuery.each(jQuery('input[name="time_slot[]"]:checked'),(function(){values.push(jQuery(this).val())})),values.length>0&&(time_slot_value=values.join(","))}}else"duration_time"==bkap_settings.booking_enable_time&&(time_slot_value=jQuery("#duration_time_slot").val());time_slot_value||(time_slot_value=settings.time_selected);var composite_data="";if("composite"===settings.product_type&&(composite_data=bkap_functions.bkap_get_composite_selections()),jQuery(MODAL_ID+".ajax_img").show(),"composite"!==settings.product_type)var quantity_str=bkap_functions.bkap_get_qty(MODAL_ID);else if("composite"===settings.product_type){var quantity_str=jQuery("input[name='quantity']").prop("value");void 0===quantity_str&&(quantity_str=1)}settings.booking_post_qty&&(quantity_str=settings.booking_post_qty);var qty_list="NO";if("grouped"==settings.product_type&&""!=settings.wapbk_grouped_child_ids&&null!=settings.wapbk_grouped_child_ids)for(var quantity_str="",child_ids=settings.wapbk_grouped_child_ids,child_ids_exploded=child_ids.split("-"),arrayLength=child_ids_exploded.length,arrayLength=arrayLength-1,i=0;i<arrayLength;i++){var quantity_grp1=jQuery('input[name="quantity['+child_ids_exploded[i]+']"]').prop("value");""==quantity_grp1&&(quantity_grp1="0"),quantity_str=""!=quantity_str?quantity_str+","+quantity_grp1:quantity_grp1,"YES"!=qty_list&&quantity_grp1>0&&(qty_list="YES")}var variation_id=0;if("simple"!=settings.product_type){var variation_by_name=document.getElementsByName(MODAL_ID+"variation_id").length;if(jQuery(MODAL_ID+".variation_id").length>0)if(jQuery(MODAL_ID+".variation_id").length>1){var variation_id="";jQuery(MODAL_ID+".variation_id").each((function(i,obj){""!=jQuery(obj).val()&&(variation_id+=jQuery(obj).val()+",")}))}else variation_id=jQuery(MODAL_ID+".variation_id").val();else variation_by_name>0&&(variation_id=document.getElementsByName(MODAL_ID+"variation_id")[0].value);0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id)}var custom_data=jQuery(".wcsatt-options-product select option:selected").data("custom_data"),subscription_price=0;custom_data&&1==custom_data.overrides_price&&(subscription_price=custom_data.subscription_scheme.price),jQuery(".wcsatt-options-product").on("change",(function(){(custom_data=jQuery(".wcsatt-options-product select option:selected").data("custom_data"))&&1==custom_data.overrides_price&&(subscription_price=custom_data.subscription_scheme.price)}));var bundle_optional={};jQuery(".bundled_product_checkbox").length>0&&jQuery(".bundled_product_checkbox").each((function(i,obj){var bundle_item=jQuery(obj).attr("name").replace("bundle_selected_optional_","");if("composite"===settings.product_type)for(c_key in composite_data)bundle_item=bundle_item.replace("component_"+c_key+"_","");jQuery(obj).prop("checked")?bundle_optional[bundle_item.toString()]="on":bundle_optional[bundle_item.toString()]="off"}));var item_number="",bundle_qty={};jQuery("input.bundled_qty").length>0&&jQuery("input.bundled_qty").each((function(index,bund_qty){item_number=jQuery(bund_qty).attr("name").replace("bundle_quantity_",""),jQuery(bund_qty).val()&&(bundle_qty[item_number.toString()]=jQuery(bund_qty).val())}));var gf_options=0;if("function"==typeof bkap_functions.update_GF_prices){var options=parseFloat(jQuery(".ginput_container_total").find(".gform_hidden").val());options>0&&(gf_options=options)}var resource_id=0;if(CalculatePrice=!0,jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0){if("bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=!1;for(i=0;i<settings.resource_ids.length;i++){resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected];var lockoutdates=[];if(""!=wapbk_resource_lockout&&null!=wapbk_resource_lockout&&(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")),""!=wapbk_resource_disaabled_dates&&null!=wapbk_resource_disaabled_dates&&(lockoutdates=lockoutdates.concat(wapbk_resource_disaabled_dates)),!(lockoutdates.length>0)){resource_id=resource_id_selected;break}for(iii=0;iii<lockoutdates.length;iii++)if(-1==jQuery.inArray(booking_date,lockoutdates)){show_rdate=!0;break}if(1==show_rdate){resource_id=resource_id_selected;break}}}else resource_id=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val();if(""!=resource_id&&resource_id>0?(wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id],resource_lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]"),resource_lockoutdates=resource_lockoutdates.concat(wapbk_resource_disaabled_dates)):resource_lockoutdates=[],""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&-1!=jQuery.inArray(jQuery(MODAL_ID+"#wapbk_hidden_date").val(),resource_lockoutdates)&&(CalculatePrice=!1),!CalculatePrice){jQuery(MODAL_ID+"#wapbk_hidden_date").val(""),jQuery(MODAL_DATE_ID+"#booking_calender").val(""),bkap_functions.bkap_disable_qty_and_cart();var data_notice={post_id:bkap_process_params.product_id,message:bkap_labels.msg_unavailable,notice_type:"error"};jQuery.post(bkap_process_params.bkap_permalink+"?wc-ajax=bkap_add_notice",data_notice,(function(response){MODAL_FORM_ID?MODAL_FORM_ID&&jQuery(MODAL_FORM_ID).prepend(response):(jQuery(".woocommerce-error").remove(),jQuery(".woocommerce-notices-wrapper").length>0&&(jQuery(".woocommerce-notices-wrapper").prepend(response),jQuery("html, body").animate({scrollTop:jQuery(".woocommerce-notices-wrapper").offset().top-100},1e3)))}))}}var all_fields_set=!0;if("duration_time"!=bkap_settings.booking_enable_time&&"on"!=bkap_settings.booking_enable_time||"on"==global_settings.hide_booking_price&&(""!=time_slot_value&&void 0!==time_slot_value||(all_fields_set=!1,jQuery(MODAL_ID+"#bkap-price-box").hide())),jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0&&""==resource_id&&(CalculatePrice=!1),all_fields_set&&CalculatePrice){var data_call={id:bkap_process_params.product_id,bkap_date:jQuery(MODAL_ID+"#wapbk_hidden_date").val(),quantity:quantity_str,action:"bkap_date_datetime_price"};if(""!=time_slot_value&&(data_call.date_time_type=bkap_settings.booking_enable_time,data_call.timeslot_value=time_slot_value,jQuery("#wapbk_number_of_timeslots").length>0&&(data_call.timeslots=jQuery("#wapbk_number_of_timeslots").val())),jQuery("#alg_currency_select").length>0&&(data_call.alg_lang=jQuery("#alg_currency_select").find(":selected").val()),settings.wc_membership&&(data_call.wc_membership=!0),jQuery("#_measurement_needed").length>0&&(data_call.wc_measurement=jQuery("#_measurement_needed").val()),0!=variation_id&&(data_call.variation_id=variation_id),0!=resource_id&&(data_call.resource_id=resource_id),"on"==bkap_settings.bkap_person&&-1!=jQuery.inArray(settings.product_type,product_types)){let person_ids=[],total_person=0;jQuery(MODAL_FORM_ID+"#bkap_field_persons").length>0?(person_id=1,person_val=jQuery(MODAL_FORM_ID+"#bkap_field_persons").val(),""==person_val&&(person_val=0),total_person=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})):jQuery('input[id^="bkap_field_persons_"]').each((function(i,row){let person_id=jQuery(this)[0].id.split("_")[3],person_val=jQuery(this).val();""==person_val&&(person_val=0),total_person+=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})})),jQuery.extend(data_call,{person_ids:person_ids,total_person:total_person})}0!=gf_options&&(data_call.gf_options=gf_options),jQuery("#wapbk_addon_data").length>0&&(data_call.addon_data=jQuery("#wapbk_addon_data").val()),jQuery.isEmptyObject(bundle_optional)&&jQuery.isEmptyObject(bundle_qty)||jQuery.extend(data_call,{bundle_optional:JSON.stringify(bundle_optional),bundle_qty:JSON.stringify(bundle_qty)});var bkap_duration=0;jQuery(MODAL_FORM_ID+"#bkap_duration_field").length>0&&(bkap_duration=jQuery("#bkap_duration_field").val()),bkap_duration&&jQuery.extend(data_call,{bkap_duration:bkap_duration,bkap_page:settings.bkap_page}),composite_data&&jQuery.extend(data_call,{composite_data:composite_data}),subscription_price>0&&jQuery.extend(data_call,{sub_price:subscription_price}),jQuery("#nyp").length>0&&jQuery.extend(data_call,{nyp:jQuery("#nyp").val()}),jQuery.post(bkap_process_params.ajax_url,data_call,(function(amt){if(jQuery(MODAL_ID+".ajax_img").hide(),amt.error)jQuery(".bkap-form-error").html(amt.message),jQuery("#bkap-price-box").hide(),jQuery(".bkap_modal_button_class").length&&jQuery(".bkap_modal_button_class").prop("disabled",!0);else{if(null!=amt.bkap_no_of_days&&""!=time_slot_value&&jQuery("#bkap_no_of_days").html(amt.bkap_no_of_days),null!=amt.bkap_price&&jQuery(MODAL_ID+"#bkap_price").html(amt.bkap_price),null!=amt.bkap_price_charged&&jQuery(MODAL_ID+"#bkap_price_charged").val(amt.bkap_price_charged),null!=amt.total_price_calculated&&(jQuery(MODAL_ID+"#total_price_calculated").val(amt.total_price_calculated),jQuery("body").trigger("bkap_price_updated",bkap_process_params.bkap_cart_item_key)),""!=settings.wapbk_grouped_child_ids&&null!=settings.wapbk_grouped_child_ids?(jQuery(".qty").prop("disabled",!1),jQuery(".plus ").prop("disabled",!1),jQuery(".minus").prop("disabled",!1),jQuery(".qty").show(),jQuery(MODAL_ID+"#bkap_price").show(),"on"==bkap_settings.booking_enable_time&&void 0!==bkap_time_slots&&bkap_time_slots!=={}?""!=jQuery("#time_slot").val()&&void 0!==time_slot_value&&"YES"==qty_list?(jQuery(".single_add_to_cart_button").prop("disabled",!1),jQuery(".single_add_to_cart_button").show(),jQuery(MODAL_ID+"#bkap_price").show(),null!=document.getElementById("bkap-add-days")&&document.getElementById("bkap-add-days").removeAttribute("disabled")):jQuery(".single_add_to_cart_button").prop("disabled",!0):"YES"==qty_list?(jQuery(".single_add_to_cart_button").prop("disabled",!1),jQuery(".single_add_to_cart_button").show(),jQuery(MODAL_ID+"#bkap_price").show()):jQuery(".single_add_to_cart_button").prop("disabled",!0),0==amt&&(jQuery(MODAL_ID+"#bkap_price").html("Booking is not available for selected quantity"),jQuery("#total_price_calculated").val(""),jQuery(".single_add_to_cart_button").prop("disabled",!0))):(0==amt&&""!=amt&&(jQuery(MODAL_ID+"#bkap_price").html("Booking is not available for selected quantity"),jQuery("#total_price_calculated").val("")),"on"!=bkap_settings.booking_enable_time&&"duration_time"!=bkap_settings.booking_enable_time&&"dates_time"!=bkap_settings.booking_enable_time||void 0===bkap_time_slots||bkap_time_slots==={}?isNaN(parseInt(variation_id))&&"bundle"!==settings.product_type&&"composite"!==settings.product_type||!jQuery("#total_price_calculated").val()||(null==document.getElementById("bkap-add-days")&&(bkap_functions.bkap_enable_qty_and_cart(),bkap_functions.bkap_show_qty_and_cart()),bkap_functions.bkap_enable_add_days_button(bkap_settings,global_settings)):""==time_slot_value||void 0===time_slot_value||isNaN(parseInt(variation_id))||""==jQuery("#total_price_calculated").val()?(0==amt?(jQuery(".single_add_to_cart_button").prop("disabled",!0),jQuery(".qty").prop("disabled",!1)):bkap_functions.bkap_disable_qty_and_cart(),jQuery(MODAL_ID+"#bkap_price").show()):(null==document.getElementById("bkap-add-days")&&(bkap_functions.bkap_enable_qty_and_cart(),bkap_functions.bkap_show_qty_and_cart()),bkap_functions.bkap_enable_add_days_button(bkap_settings,global_settings),jQuery(MODAL_ID+"#bkap_price").show())),jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val(resource_id),jQuery(".bundle_price").length>0&&jQuery(".bundle_price").hide(),jQuery(".composite_price").length>0&&jQuery(".composite_price").hide(),jQuery("#product-addons-total").length>0)jQuery(".cart").trigger("woocommerce-product-addons-update"),bkap_functions.update_wpa_multiple_prices(bkap_settings,global_settings,settings,bkap_labels);jQuery(".ginput_container_total").length>0&&"function"==typeof bkap_functions.update_GF_prices&&bkap_functions.update_GF_prices()}})),"on"==bkap_settings.booking_purchase_without_date&&"on"==bkap_settings.booking_confirmation&&jQuery(".single_add_to_cart_button").text(bkap_process_params.add_to_cart_labels.bkap_check_availability)}else jQuery(MODAL_ID+".ajax_img").hide()}}function on_close_fixed_blocks(){var current_dt,minDate,split,bkap_settings=bkap_functions.bkap_settings();if(""!==(current_dt=jQuery(MODAL_ID+"#wapbk_hidden_date").val())&&((split=current_dt.split("-"))[1]=split[1]-1,minDate=new Date(split[2],split[1],split[0])),"on"===jQuery(MODAL_ID+"#block_option_enabled").val()&&""!==minDate&&void 0!==minDate){var nod=parseInt(jQuery(MODAL_ID+"#block_option_number_of_day").val(),10);if(minDate.setDate(minDate.getDate()+nod),minDate=bkap_functions.bkap_checkout_mindate_day_check(minDate,bkap_settings),"undefined"!=typeof checkout_class){jQuery(checkout_class).datepicker("setDate",minDate);var checkout=minDate.getDate()+"-"+(minDate.getMonth()+1)+"-"+minDate.getFullYear();jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(checkout)}}}function set_checkout_mindate(minDate,settings,bkap_settings,global_settings,calendar_type,checkout_class){if("on"===jQuery(MODAL_ID+"#block_option_enabled").val()&&""!==minDate){var nod=parseInt(jQuery(MODAL_ID+"#block_option_number_of_day").val(),10);minDate.setDate(minDate.getDate()+nod),minDate=bkap_functions.bkap_checkout_mindate_day_check(minDate,bkap_settings),jQuery(checkout_class).datepicker("setDate",minDate);var checkout=minDate.getDate()+"-"+(minDate.getMonth()+1)+"-"+minDate.getFullYear();jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(checkout)}else if(bkap_settings.booking_same_day&&"on"===bkap_settings.booking_same_day&&""!==minDate)minDate.setDate(minDate.getDate());else if(""!==minDate&&void 0!==minDate){var enable_minimum="",minimum_multiple_day="";"on"===bkap_settings.enable_minimum_day_booking_multiple?(enable_minimum="on",minimum_multiple_day=bkap_settings.booking_minimum_number_days_multiple):void 0!==global_settings.minimum_day_booking&&"on"===global_settings.minimum_day_booking&&(enable_minimum="on",minimum_multiple_day=global_settings.global_booking_minimum_number_days),"on"==enable_minimum?(0!=minimum_multiple_day&&minimum_multiple_day||(minimum_multiple_day=1),minDate.setDate(minDate.getDate()+parseInt(minimum_multiple_day)),minDate=bkap_functions.bkap_checkout_mindate_day_check(minDate,bkap_settings)):minDate.setDate(minDate.getDate()+1)}else(minDate=new Date).setDate(minDate.getDate()+1);if(jQuery(checkout_class).datepicker("option","minDate",minDate),"inline"===calendar_type&&(jQuery(checkout_class).datepicker("setDate",minDate),""===jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val())){checkout=minDate.getDate()+"-"+(minDate.getMonth()+1)+"-"+minDate.getFullYear();jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(checkout)}}function bkap_set_checkin_date(date,inst){var monthValue=inst.selectedMonth+1,dayValue=inst.selectedDay,yearValue=inst.selectedYear,settings=bkap_functions.settings(),bkap_settings=bkap_functions.bkap_settings(),global_settings=bkap_functions.global_settings(),bkap_labels=bkap_functions.bkap_labels(),data={},current_dt="",split=[],minDate="",variation_id=0;if("on"===bkap_settings.enable_inline_calendar?(calendar_type="inline",checkin_class=MODAL_DATE_ID+"#inline_calendar",checkout_class=MODAL_END_DATE_ID+"#inline_calendar_checkout"):(calendar_type="normal",checkin_class=MODAL_DATE_ID+"#booking_calender",checkout_class=MODAL_END_DATE_ID+"#booking_calender_checkout"),jQuery(".woocommerce-error").length>0&&setTimeout((function(){jQuery(".woocommerce-error").remove()}),1e3),current_dt=dayValue+"-"+monthValue+"-"+yearValue,jQuery(MODAL_ID+"#wapbk_hidden_date").val(current_dt).trigger("change"),""!==current_dt&&((split=current_dt.split("-"))[1]=split[1]-1,minDate=new Date(split[2],split[1],split[0])),set_checkout_mindate(minDate,settings,bkap_settings,global_settings,calendar_type,checkout_class),void 0!==bkap_settings.booking_maximum_number_days_multiple&&"on"!=jQuery("#block_option_enabled").val()){var date_selected=jQuery(checkout_class).datepicker("getDate"),maximum=bkap_settings.booking_maximum_number_days_multiple,maxDate=new Date(split[2],split[1],split[0]);maxDate.setDate(maxDate.getDate()+parseInt(maximum)),jQuery(checkout_class).datepicker("option","maxDate",maxDate);var new_checkout=jQuery(checkout_class).datepicker("getDate");if(null!==date_selected&&null!==new_checkout&&new_checkout!==date_selected){new_checkout=new_checkout.getDate()+"-"+(new_checkout.getMonth()+1)+"-"+new_checkout.getFullYear();jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(new_checkout)}}var variation_by_name=document.getElementsByName(MODAL_ID+"variation_id").length,variation_id_count=0,bookings_placed="",field_name="";if(jQuery(MODAL_ID+".variation_id").length>0?jQuery(MODAL_ID+".variation_id").length>1?(variation_id="",jQuery(MODAL_ID+".variation_id").each((function(i,obj){""!=jQuery(obj).val()&&(variation_id+=jQuery(obj).val()+","),variation_id_count++}))):variation_id=jQuery(MODAL_ID+".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName(MODAL_ID+"variation_id")[0].value),0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id),""!=variation_id)if(variation_id_count>0)for(var var_sub_id in variation_id.split(","))""!==var_sub_id&&void 0!==var_sub_id&&(field_name="#wapbk_bookings_placed_"+var_sub_id,jQuery(field_name).length>0&&(bookings_placed+=jQuery(field_name).val()+","));else field_name="#wapbk_bookings_placed_"+variation_id,jQuery(field_name).length>0&&(bookings_placed=jQuery(field_name).val());var attr_bookings_placed="";if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){field_name=MODAL_ID+"#wapbk_bookings_placed_"+attribute_list[i];jQuery(field_name).length>0&&(attr_bookings_placed=attr_bookings_placed+attribute_list[i]+","+jQuery(field_name).val()+";")}}var resource_id_selected=0,bkap_resource_booking_placed="",resource_lockoutdates=[];if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0){if("bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=!1;for(i=0;i<settings.resource_ids.length;i++){resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected];var lockoutdates=[];if(""!=wapbk_resource_lockout&&null!=wapbk_resource_lockout&&(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")),""!=wapbk_resource_disaabled_dates&&null!=wapbk_resource_disaabled_dates&&(lockoutdates=lockoutdates.concat(wapbk_resource_disaabled_dates)),!(lockoutdates.length>0))break;for(iii=0;iii<lockoutdates.length;iii++)if(-1==jQuery.inArray(current_dt,lockoutdates)){show_rdate=!0;break}if(1==show_rdate)break}jQuery(MODAL_FORM_ID+"#bkap_resource_label").html("<b>"+settings.bkap_resource_data[resource_id_selected].resource_title+"</b>")}else resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val();""!=resource_id_selected&&resource_id_selected>0&&(bkap_resource_booking_placed=settings.bkap_booked_resource_data[resource_id_selected].bkap_booking_placed,wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],resource_lockoutdates=(resource_lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")).concat(wapbk_resource_disaabled_dates))}data={date:jQuery(MODAL_ID+"#wapbk_hidden_date").val(),post_id:bkap_process_params.product_id,date_fld_val:jQuery(MODAL_DATE_ID+"#booking_calender").val(),action:"bkap_date_lockout"};0!=variation_id&&""!=variation_id&&jQuery.extend(data,{variation_id:variation_id,bookings_placed:bookings_placed,attr_bookings_placed:attr_bookings_placed}),0!=resource_id_selected&&""!=resource_id_selected&&jQuery.extend(data,{resource_id:resource_id_selected,resource_bookings_placed:bkap_resource_booking_placed});if("on"==bkap_settings.bkap_person&&-1!=jQuery.inArray(settings.product_type,["simple","variable","subscription","variable-subscription"])){let person_ids=[],total_person=0;jQuery(MODAL_FORM_ID+"#bkap_field_persons").length>0?(person_id=1,person_val=jQuery(MODAL_FORM_ID+"#bkap_field_persons").val(),""==person_val&&(person_val=0),total_person=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})):jQuery('input[id^="bkap_field_persons_"]').each((function(i,row){let person_id=jQuery(this)[0].id.split("_")[3],person_val=jQuery(this).val();""==person_val&&(person_val=0),total_person+=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})})),jQuery.extend(data,{person_ids:person_ids,total_person:total_person})}if(jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(response.error)jQuery(".bkap-form-error").html(response.message),jQuery("#bkap-price-box").hide(),"on"==global_settings.display_disabled_buttons?bkap_functions.bkap_disable_qty_and_cart():bkap_functions.bkap_hide_qty_and_cart();else if(void 0!==global_settings.booking_availability_display&&"on"==global_settings.booking_availability_display&&jQuery(MODAL_FORM_ID+"#bkap_show_stock_status").html(response.message),""!=response.max_qty&&0!=response.max_qty&&"Unlimited"!=response.max_qty){var max=parseInt(response.max_qty);jQuery('input[name="quantity"]').attr("max",max)}})),""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()){var CalculatePrice=!0;(split=jQuery(MODAL_ID+"#wapbk_hidden_date").val().split("-"))[1]=split[1]-1;var CheckinDate=new Date(split[2],split[1],split[0]);(split=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val().split("-"))[1]=split[1]-1;var CheckoutDate=new Date(split[2],split[1],split[0]),m=(date=new_end=new Date(CheckinDate)).getMonth(),d=date.getDate(),y=date.getFullYear(),bookedDates=[];if(settings.wapbk_hidden_booked_dates)bookedDates=JSON.parse("["+settings.wapbk_hidden_booked_dates+"]");for(var holidayDates=JSON.parse("["+settings.holidays+"]"),count=bkap_gd(CheckinDate,CheckoutDate,"days"),i=1;i<=count;i++){if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bookedDates)){CalculatePrice=!1;break}if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,resource_lockoutdates)){CalculatePrice=!1;break}if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,holidayDates)){if("on"!=global_settings.booking_include_global_holidays){CalculatePrice=!1;break}CalculatePrice=!0}new_end=new Date(bkap_ad(new_end,1));m=new_end.getMonth(),d=new_end.getDate(),y=new_end.getFullYear()}if(CalculatePrice)bkap_calculate_price();else{jQuery(MODAL_ID+"#wapbk_hidden_date").val(""),jQuery(MODAL_DATE_ID+"#booking_calender").val(""),bkap_functions.bkap_disable_qty_and_cart();data={post_id:bkap_process_params.product_id,message:bkap_labels.msg_unavailable,notice_type:"error"};jQuery.post(bkap_process_params.bkap_permalink+"?wc-ajax=bkap_add_notice",data,(function(response){MODAL_FORM_ID?MODAL_FORM_ID&&jQuery(MODAL_FORM_ID).prepend(response):(jQuery(".woocommerce-error").remove(),jQuery(".woocommerce-notices-wrapper").length>0&&(jQuery(".woocommerce-notices-wrapper").prepend(response),jQuery("html, body").animate({scrollTop:jQuery(".woocommerce-notices-wrapper").offset().top-100},1e3)))}))}}}function bkap_get_per_night_price(date,inst){var monthValue=inst.selectedMonth+1,current_dt=inst.selectedDay+"-"+monthValue+"-"+inst.selectedYear;jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(current_dt),bkap_calculate_price()}function bkap_calculate_price(){if(null!=jQuery(MODAL_ID+"#wapbk_hidden_date").length&&0!=jQuery(MODAL_ID+"#wapbk_hidden_date").length){jQuery(MODAL_ID+"#bkap-price-box").show();var settings=bkap_functions.settings(),global_settings=JSON.parse(bkap_process_params.global_settings),bkap_settings=bkap_functions.bkap_settings(),bkap_labels=bkap_functions.bkap_labels(),wapbk_hidden_date=jQuery(MODAL_ID+"#wapbk_hidden_date").val(),wapbk_hidden_date_checkout=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val();"on"==global_settings.hide_variation_price&&jQuery(MODAL_FORM_ID+".woocommerce-variation-price").css("display","none"),bkap_functions.bkap_disable_qty_and_cart(),bkap_functions.bkap_hide_wc_notice();var CalculatePrice=!0,CheckinDate=bkap_functions.bkap_create_date_obj(wapbk_hidden_date);if(void 0!==bkap_settings.booking_fixed_block_enable&&"booking_fixed_block_enable"===bkap_settings.booking_fixed_block_enable&&bkap_settings.bkap_fixed_blocks_data.length){var days=jQuery("#block_option_number_of_day").val(),CheckoutDate=bkap_functions.bkap_add_days_to_date(CheckinDate,days);wapbk_hidden_date_checkout=bkap_functions.bkap_create_date(CheckoutDate)}else var CheckoutDate=bkap_functions.bkap_create_date_obj(wapbk_hidden_date_checkout);var date=new_end=new Date(CheckinDate),m=date.getMonth(),d=date.getDate(),y=date.getFullYear(),bookedDates=[];settings.wapbk_hidden_booked_dates&&(bookedDates=JSON.parse("["+settings.wapbk_hidden_booked_dates+"]"));var holidayDates=JSON.parse("["+settings.holidays+"]"),count=bkap_gd(CheckinDate,CheckoutDate,"days");if("on"==settings.wapbk_same_day&&(count+=1),jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0){var resource_id_selected=0;if("bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=!1;for(i=0;i<settings.resource_ids.length;i++){resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected];var lockoutdates=[];if(""!=wapbk_resource_lockout&&null!=wapbk_resource_lockout&&(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")),""!=wapbk_resource_disaabled_dates&&null!=wapbk_resource_disaabled_dates&&(lockoutdates=lockoutdates.concat(wapbk_resource_disaabled_dates)),!(lockoutdates.length>0))break;for(iii=0;iii<lockoutdates.length;iii++)if(-1==jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates)){show_rdate=!0;break}if(1==show_rdate)break}}else resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val();if(""!=resource_id_selected&&resource_id_selected>0){wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected];var resource_lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]");resource_lockoutdates=resource_lockoutdates.concat(wapbk_resource_disaabled_dates)}}var variation_id_selected=0,variation_by_name=document.getElementsByName("variation_id").length;jQuery(".variation_id").length>0?variation_id_selected=jQuery(".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value);for(var field_name="#wapbk_lockout_"+variation_id_selected,variation_lockoutdates=jQuery(field_name).val(),i=1;i<=count;i++){if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bookedDates)){CalculatePrice=!1;break}if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,resource_lockoutdates)){CalculatePrice=!1;break}if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,holidayDates)){if("on"!=global_settings.booking_include_global_holidays){CalculatePrice=!1;break}CalculatePrice=!0}if(void 0!==variation_lockoutdates&&variation_lockoutdates.indexOf(new_end)>-1){CalculatePrice=!1;break}new_end=new Date(bkap_ad(new_end,1));var m=new_end.getMonth(),d=new_end.getDate(),y=new_end.getFullYear()}if("on"===bkap_settings.booking_enable_multiple_day){var bkap_rent=JSON.parse("["+settings.bkap_rent+"]"),variation_id_selected=0,variation_by_name=document.getElementsByName("variation_id").length;jQuery(".variation_id").length>0?variation_id_selected=jQuery(".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value);var field_name="#wapbk_lockout_checkout_"+variation_id_selected,variation_lockoutdates="";if(jQuery(field_name).val()){var field_name_str=jQuery(field_name).val();field_name_str=field_name_str.replace(/\"/g,""),variation_lockoutdates=field_name_str.split(",")}for(var date=new_end=new Date(CheckinDate),m=date.getMonth(),d=date.getDate(),y=date.getFullYear(),i=1;i<=count;i++){if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bkap_rent)){CalculatePrice=!1;break}if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,variation_lockoutdates)){CalculatePrice=!1;break}new_end=new Date(bkap_ad(new_end,1));var m=new_end.getMonth(),d=new_end.getDate(),y=new_end.getFullYear()}CalculatePrice&&"on"!=global_settings.booking_include_global_holidays&&(CalculatePrice=bkap_functions.bkap_check_disable_day_between_checkin_checkout(CalculatePrice,date,CheckoutDate,bkap_settings))}if(!CalculatePrice){jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val(""),jQuery(MODAL_END_DATE_ID+"#booking_calender_checkout").val(""),bkap_functions.bkap_disable_qty_and_cart();var data={post_id:bkap_process_params.product_id,message:bkap_labels.msg_unavailable,notice_type:"error"};setTimeout((function(){jQuery.post(bkap_process_params.bkap_permalink+"?wc-ajax=bkap_add_notice",data,(function(response){MODAL_FORM_ID?MODAL_FORM_ID&&jQuery(MODAL_FORM_ID).prepend(response):(jQuery(".woocommerce-error").remove(),jQuery(".woocommerce-notices-wrapper").length>0&&(jQuery(".woocommerce-notices-wrapper").prepend(response),jQuery("html, body").animate({scrollTop:jQuery(".woocommerce-notices-wrapper").offset().top-100},1e3)))}))}))}if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0&&(0!=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val()&&""!=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val()||(CalculatePrice=!1)),CalculatePrice&&"on"===bkap_settings.booking_enable_multiple_day){var sold_individually=settings.sold_individually,value_charge=0;bkap_settings.booking_charge_per_day&&"on"==bkap_settings.booking_charge_per_day&&(value_charge=1);var diffDays=bkap_functions.bkap_date_utc(CheckinDate,CheckoutDate);if(diffDays+=value_charge,0==diffDays&&(diffDays=1),jQuery(MODAL_ID+"#wapbk_diff_days").val(diffDays),"composite"!==settings.product_type)var quantity_str=bkap_functions.bkap_get_qty(MODAL_ID);else if("composite"===settings.product_type){var quantity_str=jQuery("input[name='quantity']").prop("value");void 0===quantity_str&&(quantity_str=1)}var qty_list="NO";if(settings.wapbk_grouped_child_ids.length>0&&""!=settings.wapbk_grouped_child_ids)for(var quantity_str="",child_ids=settings.wapbk_grouped_child_ids,child_ids_exploded=child_ids.split("-"),arrayLength=child_ids_exploded.length,arrayLength=arrayLength-1,i=0;i<arrayLength;i++){var quantity_grp1=jQuery('input[name="quantity['+child_ids_exploded[i]+']"]').prop("value");quantity_str=""!=quantity_str?quantity_str+","+quantity_grp1:quantity_grp1,"YES"!=qty_list&&quantity_grp1>0&&(qty_list="YES")}var variation_id=0,variation_by_name=document.getElementsByName("variation_id").length;if(jQuery(MODAL_ID+".variation_id").length>0)if(jQuery(MODAL_ID+".variation_id").length>1){var variation_id="";jQuery(MODAL_ID+".variation_id").each((function(i,obj){variation_id+=jQuery(obj).val()+","}))}else variation_id=jQuery(MODAL_ID+".variation_id").val();else variation_by_name>0&&(variation_id=document.getElementsByName(MODAL_ID+"variation_id")[0].value);var composite_data="";"composite"===settings.product_type&&(composite_data=bkap_functions.bkap_get_composite_selections()),0==variation_id&&settings.default_var_id>0&&(variation_id=settings.default_var_id);var bundle_optional={};jQuery(".bundled_product").length>0&&jQuery(".bundled_product").each((function(i,obj){jQuery(this).find(".bundled_product_checkbox").length>0?jQuery(this).find(".bundled_product_checkbox").each((function(ii,objj){var bundle_item=jQuery(objj).attr("name").replace("bundle_selected_optional_","");if("composite"===settings.product_type)for(c_key in composite_data)bundle_item=bundle_item.replace("component_"+c_key+"_","");jQuery(objj).prop("checked")?bundle_optional[bundle_item.toString()]="on":bundle_optional[bundle_item.toString()]="off"})):jQuery(this).find(".cart").each((function(ii,objj){var bundle_item=jQuery(objj).data("bundled_item_id").toString();if("composite"===settings.product_type)for(c_key in composite_data)bundle_item=bundle_item.replace("component_"+c_key+"_","");bundle_optional[bundle_item.toString()]="on"}))}));var item_number="",bundle_qty={};if(jQuery("input.bundled_qty").length>0&&jQuery("input.bundled_qty").each((function(index,bund_qty){item_number=jQuery(bund_qty).attr("name").replace("bundle_quantity_",""),jQuery(bund_qty).val()&&(bundle_qty[item_number.toString()]=jQuery(bund_qty).val())})),jQuery(MODAL_ID+".ajax_img").show(),booking_date=jQuery(MODAL_ID+"#wapbk_hidden_date").val(),jQuery("#wapbk_addon_data").length>0&&null!=bkap_settings.allow_full_payment&&"yes"==bkap_settings.allow_full_payment){var allow_full_payment="",default_payment_radio="",deposit_x_days=0,date1=new Date,date2=bkap_functions.bkap_create_date_obj(booking_date),timeDiff=Math.abs(date2.getTime()-date1.getTime()),diffDays=Math.ceil(timeDiff/864e5);allow_full_payment=bkap_settings.allow_full_payment,deposit_x_days=bkap_settings.booking_deposit_x_days,default_payment_radio=bkap_settings.booking_default_payment_radio,"full_payment"==jQuery("#wapbk_addon_data").val()&&(jQuery(".partial_message").hide(),jQuery(".payment_type.partial input:radio").prop("disabled",!1),jQuery("#wapbk_addon_data").val("full_payment")),deposit_x_days>0&&diffDays<=deposit_x_days&&(jQuery(".payment_type input:radio:not(:disabled):first-child").prop("checked",!0),jQuery(".payment_type.partial input:radio").prop("disabled",!0),jQuery("#wapbk_addon_data").val("full_payment"),jQuery(".partial_message").show())}if(jQuery("#extend_booking_calculation").length>0){var data={booking_date:booking_date,post_id:bkap_process_params.product_id,addon_data:jQuery("#extend_booking_calculation").val(),action:"bkap_js"};jQuery.post(bkap_process_params.ajax_url,data,(function(response){eval(response)}))}var gf_options=0;"function"==typeof get_gravity_forms_price&&(gf_options=get_gravity_forms_price(jQuery("#gform_form_id").val()));var attribute_data=bkap_process_params.attr_fields_str;if(0!==Object.getOwnPropertyNames(attribute_data).length)for(var attribute_data_key in attribute_data)attribute_data[attribute_data_key]=jQuery('[name="'+attribute_data_key+'"]').val();if(""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()){jQuery("body").trigger("bkap_before_price_updated",bkap_process_params.bkap_cart_item_key);let attribute_selected=bkap_variation_value(bkap_settings,bkap_process_params);var data={current_date:wapbk_hidden_date_checkout,checkin_date:wapbk_hidden_date,attribute_selected:attribute_selected,currency_selected:jQuery(".wcml_currency_switcher").val(),block_option_price:jQuery("#block_option_price").val(),post_id:bkap_process_params.product_id,diff_days:jQuery(MODAL_ID+"#wapbk_diff_days").val(),quantity:quantity_str,variation_id:variation_id,gf_options:gf_options,resource_id:resource_id_selected,action:"bkap_get_per_night_price",product_type:settings.product_type};let product_types=["simple","variable","subscription","variable-subscription"];if("on"==bkap_settings.bkap_person&&-1!=jQuery.inArray(settings.product_type,product_types)){let person_ids=[],total_person=0;jQuery(MODAL_FORM_ID+"#bkap_field_persons").length>0?(person_id=1,person_val=jQuery(MODAL_FORM_ID+"#bkap_field_persons").val(),""==person_val&&(person_val=0),total_person=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})):jQuery('input[id^="bkap_field_persons_"]').each((function(i,row){let person_id=jQuery(this)[0].id.split("_")[3],person_val=jQuery(this).val();""==person_val&&(person_val=0),total_person+=parseInt(person_val),person_ids.push({person_id:person_id,person_val:person_val})})),jQuery.extend(data,{person_ids:person_ids,total_person:total_person})}jQuery("#wapbk_addon_data").length>0&&(data.addon_data=jQuery("#wapbk_addon_data").val()),settings.wc_membership&&(data.wc_membership=!0),jQuery("#_measurement_needed").length>0&&(data.wc_measurement=jQuery("#_measurement_needed").val()),jQuery.isEmptyObject(bundle_optional)&&jQuery.isEmptyObject(bundle_qty)||jQuery.extend(data,{bundle_optional:JSON.stringify(bundle_optional),bundle_qty:JSON.stringify(bundle_qty)}),0!==Object.getOwnPropertyNames(attribute_data).length&&jQuery.extend(data,attribute_data),jQuery("#nyp").length>0&&jQuery.extend(data,{nyp:jQuery("#nyp").val()}),composite_data&&jQuery.extend(data,{composite_data:composite_data}),jQuery.post(bkap_process_params.ajax_url,data,(function(response){if(jQuery(MODAL_ID+".ajax_img").hide(),response.error)jQuery(".bkap-form-error").html(response.message),jQuery("#bkap-price-box").hide();else{if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val(resource_id_selected),null!=response.bkap_no_of_days&&jQuery("#bkap_no_of_days").html(settings.bkap_no_of_days+response.bkap_no_of_days),null!=response.bkap_price&&jQuery(MODAL_ID+"#bkap_price").html(response.bkap_price),null!=response.bkap_price_charged&&jQuery(MODAL_ID+"#bkap_price_charged").val(response.bkap_price_charged),null!=response.total_price_calculated&&(jQuery(MODAL_ID+"#total_price_calculated").val(response.total_price_calculated),jQuery("body").trigger("bkap_price_updated",bkap_process_params.bkap_cart_item_key)),""!=settings.wapbk_grouped_child_ids?(jQuery(".qty").prop("disabled",!1),jQuery(".qty").show(),"YES"==qty_list?(jQuery(".single_add_to_cart_button").prop("disabled",!1),jQuery(".single_add_to_cart_button").show()):jQuery(".single_add_to_cart_button").prop("disabled",!0)):isNaN(parseInt(variation_id))&&"bundle"!==settings.product_type&&"composite"!==settings.product_type||!jQuery(MODAL_ID+"#total_price_calculated").val()?void 0===variation_id&&bkap_functions.bkap_disable_qty_and_cart():(bkap_functions.bkap_enable_qty_and_cart(),bkap_functions.bkap_show_qty_and_cart()),jQuery(".payment_type").show(),"yes"==sold_individually?jQuery('.quantity  input[name="quantity"]').hide():jQuery('.quantity  input[name="quantity"]').show(),jQuery(".bundle_price").length>0&&jQuery(".bundle_price").hide(),jQuery(".composite_price").length>0&&jQuery(".composite_price").hide(),jQuery("#product-addons-total").length>0)jQuery(".cart").trigger("woocommerce-product-addons-update"),bkap_functions.update_wpa_multiple_prices(bkap_settings,global_settings,settings,bkap_labels);jQuery(".ginput_container_total").length>0&&"function"==typeof bkap_functions.update_GF_prices&&setTimeout((function(){bkap_functions.update_GF_prices()}),500)}})),"on"==bkap_settings.booking_purchase_without_date&&"on"==bkap_settings.booking_confirmation&&jQuery(".single_add_to_cart_button").text(bkap_process_params.add_to_cart_labels.bkap_check_availability)}else jQuery(MODAL_ID+".ajax_img").hide()}}}function checkin_date_process(current_dt,calendar_id){bkap_functions.settings(),bkap_functions.bkap_settings(),bkap_functions.global_settings();if((calendar_id=calendar_id?"#inline_calendar_checkout":"#booking_calender_checkout")&&""!=jQuery(calendar_id).val()){if(""!=jQuery("#wapbk_hidden_date_checkout").val())checkout=jQuery("#wapbk_hidden_date_checkout").val();else checkout=(dd=minDate.getDate())+"-"+(mm=minDate.getMonth()+1)+"-"+(yyyy=minDate.getFullYear());jQuery("#wapbk_hidden_date_checkout").val(checkout)}if(""!=jQuery("#wapbk_hidden_date_checkout").val()&&""!=jQuery("#wapbk_hidden_date").val()){var dd,mm,yyyy,checkout=(dd=minDate.getDate())+"-"+(mm=minDate.getMonth()+1)+"-"+(yyyy=minDate.getFullYear()),new_checkout_date=new Date(yyyy,mm,dd),split_hidden=jQuery("#wapbk_hidden_date_checkout").val().split("-");new_checkout_date>new Date(split_hidden[2],split_hidden[1],split_hidden[0])&&jQuery("#wapbk_hidden_date_checkout").val(checkout),bkap_calculate_price()}}function bkap_variation_value(bkap_settings,bkap_process_params){let attribute_values="";var attribute_selected="";return"booking_block_price_enable"==bkap_settings.booking_block_price_enable&&(""!=bkap_process_params.attr_value&&(a_v=bkap_process_params.attr_value,a_v=a_v.split(","),jQuery.each(a_v,(function(key,value){attribute_values=attribute_values+"|"+jQuery("[name='"+value+"']").val()}))),""!=bkap_process_params.attr_selected&&(a_v_s=bkap_process_params.attr_selected,a_v_s=a_v_s.split(","),jQuery.each(a_v_s,(function(key,value){attribute_selected=attribute_selected+"|"+jQuery("[name='"+value+"'] :selected").text()}))),jQuery("#wapbk_variation_value").val(attribute_selected)),attribute_selected}function bkap_preparing_individual_data(hidden_date,selected_date,price_charged,total_rows,settings,time_slot_value=""){let info_row=document.createElement("tr"),row_id="bkap_multiple_date_info_"+total_rows;info_row.setAttribute("id",row_id);let date_td=document.createElement("td");if(date_td.appendChild(document.createTextNode(selected_date)),""!=time_slot_value){var time_td=document.createElement("td");time_td.appendChild(document.createTextNode(time_slot_value))}let price_td=document.createElement("td");price_td.appendChild(document.createTextNode(bkap_functions.bkap_format_money(settings.bkap_currency_args,price_charged.value)));let btn=document.createElement("BUTTON"),btn_td=document.createElement("td");btn.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',btn.setAttribute("onClick","bkap_remove_booking_info( this ); return false;"),btn.setAttribute("class","bkap_multidates_delete"),btn_td.appendChild(btn),info_row.setAttribute("data-date",hidden_date),""!=time_slot_value&&info_row.setAttribute("data-time",time_slot_value),info_row.setAttribute("data-price",price_charged.value),info_row.appendChild(date_td),""!=time_slot_value&&info_row.appendChild(time_td),info_row.appendChild(price_td),info_row.appendChild(btn_td);var bkap_multidate_data={};return bkap_multidate_data.date=selected_date,bkap_multidate_data.hidden_date=hidden_date,bkap_multidate_data.price_charged=price_charged.value,jQuery("#bkap_front_resource_selection").length>0&&(bkap_multidate_data.resource_id=jQuery("#bkap_front_resource_selection").val()),""!=time_slot_value&&(bkap_multidate_data.time_slot=time_slot_value),{total_rows:total_rows,info_row:info_row,mul_data:bkap_multidate_data}}function bkap_add_selected_bookings(){var global_settings=bkap_functions.global_settings(),bkap_settings=bkap_functions.bkap_settings(),settings=bkap_functions.settings();let bkap_type=bkap_settings.booking_enable_time,time_booking="dates_time"===bkap_type||"on"===bkap_type,selected_date=document.getElementById("booking_calender").value,hidden_date=document.getElementById("wapbk_hidden_date").value;if(""==hidden_date)return void alert("Please select booking date..");let time_slot_values=[],time_slot="";if(time_booking){let time_slot_element=document.getElementById("time_slot");if(null===time_slot_element?(jQuery.each(jQuery('input[name="time_slot[]"]:checked'),(function(){time_slot_values.push(jQuery(this).val())})),time_slot_values.length>0&&(time_slot=time_slot_values.join(","))):(time_slot=time_slot_element.value,console.log("time_slot",time_slot)),""==time_slot)return void alert("Please select booking time..")}document.getElementsByClassName("variations").length>0&&(document.getElementsByClassName("variations")[0].style.pointerEvents="none"),document.getElementById("bkap-multidate-box").style.display="block";let table=document.getElementById("bkap-multidate-info"),body=table.getElementsByTagName("tbody")[0],total_rows=table.rows.length,tfoot=table.getElementsByTagName("tfoot")[0].rows[0],total_price_charged=tfoot.getAttribute("data-total-price-charged"),added_dates=0;if(total_rows>0)for(let i=0;i<table.rows.length;i++){let row=table.rows[i].id;if(-1!==row.indexOf("bkap_multiple_date_info_")){added_dates++;let row_id_split=row.split("_");total_rows=row_id_split[4],total_rows=parseInt(total_rows)+1}}let bkap_multidate_data=document.getElementById("bkap_multidate_data").value;bkap_multidate_data=""==bkap_multidate_data?{}:JSON.parse(bkap_multidate_data);let results=[];for(key in bkap_multidate_data)time_booking?bkap_multidate_data[key].hidden_date===hidden_date&&bkap_multidate_data[key].time_slot===time_slot&&results.push(bkap_multidate_data[key]):bkap_multidate_data[key].hidden_date===hidden_date&&results.push(bkap_multidate_data[key]);if(results.length>0){let bkap_multidates_error=document.getElementById("bkap_multidates_error");return bkap_multidates_error.className="",bkap_multidates_error.classList.add("woocommerce-error"),void(bkap_multidates_error.innerHTML=settings.bkap_multidates_already_added_msg)}let price_charged=document.getElementById("bkap_price_charged");var returned_data={},display_atc=!1;if(time_booking)if(time_slot_values.length>0)time_slot_values.forEach((function(item,index){returned_data=bkap_preparing_individual_data(hidden_date,selected_date,price_charged,total_rows,settings,item),added_dates++;var fixed_range_validation=bkap_fixed_range_validation(added_dates,bkap_settings,global_settings,"add"),bkap_return=fixed_range_validation.bkap_return;display_atc=fixed_range_validation.display_atc,bkap_return||(bkap_multidate_data[total_rows]=returned_data.mul_data,total_rows++,body.appendChild(returned_data.info_row))}));else{returned_data=bkap_preparing_individual_data(hidden_date,selected_date,price_charged,total_rows,settings,time_slot),added_dates++;var bkap_return=(fixed_range_validation=bkap_fixed_range_validation(added_dates,bkap_settings,global_settings,"add")).bkap_return;if(display_atc=fixed_range_validation.display_atc,bkap_return)return;bkap_multidate_data[total_rows]=returned_data.mul_data,body.appendChild(returned_data.info_row)}else{returned_data=bkap_preparing_individual_data(hidden_date,selected_date,price_charged,total_rows,settings),bkap_multidate_data[total_rows]=returned_data.mul_data,added_dates++;var fixed_range_validation;bkap_return=(fixed_range_validation=bkap_fixed_range_validation(added_dates,bkap_settings,global_settings,"add")).bkap_return;if(display_atc=fixed_range_validation.display_atc,bkap_return)return;body.appendChild(returned_data.info_row)}total_price_charged=parseFloat(total_price_charged)+parseFloat(price_charged.value),tfoot.setAttribute("data-total-price-charged",total_price_charged),document.getElementById("bkap-multidates-total").innerHTML=bkap_functions.bkap_format_money(settings.bkap_currency_args,total_price_charged),document.getElementById("bkap_multidate_data").value=JSON.stringify(bkap_multidate_data),document.getElementById("booking_calender").value="",document.getElementById("wapbk_hidden_date").value="",document.getElementById("bkap-price-box").style.display="none",document.getElementById("total_price_calculated").value="",document.getElementById("bkap_price_charged").value="",document.getElementById("bkap-add-days").setAttribute("disabled","disabled"),null!=document.getElementById("bkap_show_stock_status")&&(document.getElementById("bkap_show_stock_status").innerHTML=""),time_booking&&(document.getElementById("show_time_slot").innerHTML=""),display_atc&&bkap_multidates_allow_atc(global_settings)}function bkap_multidates_allow_atc(global_settings){let admin_create_booking_button=document.getElementsByClassName("bkap_create_booking")[0],single_add_to_cart_button=document.getElementsByClassName("single_add_to_cart_button")[0];"on"==global_settings.display_disabled_buttons?(void 0!==single_add_to_cart_button&&single_add_to_cart_button.removeAttribute("disabled"),void 0!==admin_create_booking_button&&admin_create_booking_button.removeAttribute("disabled")):(void 0!==single_add_to_cart_button&&(single_add_to_cart_button.removeAttribute("disabled"),single_add_to_cart_button.style.display="block"),void 0!==admin_create_booking_button&&(admin_create_booking_button.removeAttribute("disabled"),admin_create_booking_button.style.display="block"))}function bkap_multidates_notallow_atc(global_settings){"on"==global_settings.display_disabled_buttons?document.getElementsByClassName("single_add_to_cart_button")[0].setAttribute("disabled","disabled"):document.getElementsByClassName("single_add_to_cart_button")[0].style.display="none"}function bkap_fixed_range_validation(added_dates,bkap_settings,global_settings){let display_atc=!0,m_type=bkap_settings.multidates_type,bkap_return=!1,bkap_multidates_error=document.getElementById("bkap_multidates_error");if(bkap_multidates_error.className="",bkap_multidates_error.innerHTML="","fixed"==m_type){let m_fixed_date=parseInt(bkap_settings.multidates_fixed_number);added_dates>m_fixed_date?(bkap_multidates_error.classList.add("woocommerce-error"),bkap_multidates_error.innerHTML="You can add maximum of "+m_fixed_date+" dates",bkap_multidates_allow_atc(global_settings),bkap_return=!0):added_dates<m_fixed_date&&(display_atc=!1)}else{let m_range_min=parseInt(bkap_settings.multidates_range_min),m_range_max=parseInt(bkap_settings.multidates_range_max);if(added_dates<m_range_min)m_range_min-=added_dates,bkap_multidates_error.classList.add("woocommerce-info"),bkap_multidates_error.innerHTML="Add more "+m_range_min+" dates for booking.",bkap_multidates_notallow_atc(global_settings),display_atc=!1;else if(added_dates>m_range_max)bkap_multidates_error.classList.add("woocommerce-error"),bkap_multidates_error.innerHTML="You can add maximum of "+m_range_max+" dates",display_atc=!0,bkap_return=!0;else if(added_dates>=m_range_min&&added_dates<=m_range_max&&(added_dates==m_range_max&&(bkap_multidates_error.className="",bkap_multidates_error.innerHTML=""),added_dates<m_range_max)){m_range_max-=added_dates,bkap_multidates_error.classList.add("woocommerce-info");let bkap_multidate_text=parseInt(m_range_max)>1?`You can add ${m_range_max} more dates.`:"You can add another date.";bkap_multidates_error.innerHTML=bkap_multidate_text}}return{display_atc:display_atc,bkap_return:bkap_return}}function bkap_remove_booking_info(btn){let global_settings=bkap_functions.global_settings(),bkap_settings=bkap_functions.bkap_settings(),settings=bkap_functions.settings(),row=btn.parentNode.parentNode,row_id=row.id,price=row.getAttribute("data-price"),table=document.getElementById("bkap-multidate-info"),tfoot=table.getElementsByTagName("tfoot")[0].rows[0],total_price_charged=tfoot.getAttribute("data-total-price-charged");total_price_charged-=price,tfoot.setAttribute("data-total-price-charged",total_price_charged),document.getElementById("bkap-multidates-total").innerHTML=bkap_functions.bkap_format_money(settings.bkap_currency_args,total_price_charged),row.parentNode.removeChild(row);let bkap_multidate_data=document.getElementById("bkap_multidate_data").value;bkap_multidate_data=""==bkap_multidate_data?{}:JSON.parse(bkap_multidate_data),delete bkap_multidate_data[row_id],document.getElementById("bkap_multidate_data").value=JSON.stringify(bkap_multidate_data);let rows_after_delete=table.getElementsByTagName("tbody")[0].rows,fixed_range_validation=bkap_fixed_range_validation(rows_after_delete.length,bkap_settings,global_settings,"delete");return 0==rows_after_delete.length&&document.getElementsByClassName("variations").length>0&&(document.getElementsByClassName("variations")[0].style.pointerEvents=""),fixed_range_validation.display_atc?bkap_multidates_allow_atc(global_settings):bkap_multidates_notallow_atc(global_settings),!1}function bkap_reset_booking_details(mode){"sale"==mode&&jQuery("#bkap-booking-form").css("display","none"),jQuery("#bkap-price-box").css("display","none"),jQuery('[name="booking_calender"]').removeAttr("checked"),jQuery("#booking_calender").val(""),jQuery("#booking_calender_checkout").val(""),jQuery("#time_slot").val(""),jQuery("#bkap_price").html(""),jQuery("#wapbk_hidden_date").val(""),jQuery("#wapbk_hidden_date_checkout").val(""),jQuery("#bkap_price_charged").val(""),jQuery("#total_price_calculated").val(""),bkap_functions.bkap_enable_qty_and_cart(),jQuery("#bkap-multidate-box").length>0&&(jQuery("#bkap-multidate-box").hide(),jQuery("#bkap_multidate_data").val(""))}jQuery(document).on("change","#bkap_front_resource_selection, #bkap_field_persons, input[id^='bkap_field_persons_']",(function(){var bkap_settings=JSON.parse(bkap_process_params.bkap_settings);jQuery("#inline_calendar").length>0&&jQuery("#inline_calendar").datepicker("refresh"),jQuery("#time_slot").length>0&&jQuery("#time_slot").val(""),jQuery("#inline_calendar_checkout").length>0&&jQuery("#inline_calendar_checkout").datepicker("refresh"),"on"!=bkap_settings.booking_recurring_booking&&"on"!=bkap_settings.booking_specific_booking||"on"==bkap_settings.booking_enable_multiple_day?"on"==bkap_settings.booking_enable_multiple_day&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&(bkap_process_date(jQuery("#wapbk_hidden_date").val()),bkap_calculate_price()):""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&bkap_process_date(jQuery("#wapbk_hidden_date").val())})),jQuery(document).ready((function($){$(".ui-datepicker").addClass("notranslate");var max_width=0,max_height=0;if($(".bkap_block a").each((function(){var width=$(this).width(),height=$(this).height();width>max_width&&(max_width=width),height>max_height&&(max_height=height)})),$(".bkap_block a").width(max_width),$(".bkap_block a").height(max_height),"undefined"!=typeof bkap_process_params){if(bkap_process_init(jQuery,bkap_process_params),""!=jQuery("#wapbk_hidden_date").val()){bkap_functions.global_settings();var bkap_settings=bkap_functions.bkap_settings(),settings=bkap_functions.settings();"on"!=bkap_settings.booking_enable_multiple_day&&"product"==settings.bkap_page&&"variable"==settings.product_type&&"on"==bkap_settings.enable_inline_calendar&&("on"==bkap_settings.booking_enable_time?bkap_process_date(jQuery("#wapbk_hidden_date").val()):bkap_single_day_price())}bkap_functions.doc_ready_other_plugin_actions()}"undefined"!=typeof bkap_process_params&&""!==bkap_process_params.on_change_attr_list&&jQuery(document).on("change","select"+bkap_process_params.on_change_attr_list,(function(){var settings=bkap_functions.settings(),bkap_settings=bkap_functions.bkap_settings(),global_settings=bkap_functions.global_settings();"on"!=bkap_settings.booking_purchase_without_date&&"on"==global_settings.hide_variation_price&&jQuery(MODAL_FORM_ID+".woocommerce-variation-price").css("display","none"),jQuery("#inline_calendar").length>0&&jQuery("#inline_calendar").datepicker("refresh"),jQuery("#time_slot").length>0&&jQuery("#time_slot").val("");var variation_id_selected=0,variation_by_name=document.getElementsByName("variation_id").length;if(jQuery(".variation_id").length>0?variation_id_selected=jQuery(".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value),""!=jQuery("#wapbk_hidden_date").val()){var recalculate="YES",variation_lockoutdates=jQuery("#wapbk_lockout_"+variation_id_selected).val(),date_booked=jQuery("#wapbk_hidden_date").val();void 0!==variation_lockoutdates&&variation_lockoutdates.indexOf(date_booked)>-1&&(recalculate="NO",jQuery("#wapbk_hidden_date").val(""),jQuery("#booking_calender").val(""),bkap_functions.bkap_disable_qty_and_cart()),"YES"==recalculate?bkap_process_date(jQuery("#wapbk_hidden_date").val()):jQuery("#bkap_show_stock_status").html("")}else if(variation_id_selected>0){var variation_list=settings.wapbk_var_price_list.split(",");for(i=0;i<variation_list.length;i++){var price_list=variation_list[i].split("=>");price_list[0]==variation_id_selected&&(jQuery("#total_price_calculated").val(price_list[1]),jQuery("#bkap_price_charged").val(price_list[1]))}"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings)}})),jQuery("#booking_calender").change((function(){if(""!=jQuery("#booking_calender").val()){var exploded_id=this.value.split("&"),date_exploded=exploded_id[0].split("-"),checkin_date=exploded_id[0],month=date_exploded[1],date=date_exploded[0],year=date_exploded[2];bkap_show_times(checkin_date,{selectedMonth:parseInt(month)-1,selectedDay:parseInt(date),selectedYear:parseInt(year)})}}))})),jQuery(document).on("change","#bkap_duration_field",(function(){jQuery(MODAL_ID+"#duration_time_slot").val("");var bkap_settings=JSON.parse(bkap_process_params.bkap_settings);jQuery("#inline_calendar").length>0&&jQuery("#inline_calendar").datepicker("refresh"),jQuery("#inline_calendar_checkout").length>0&&jQuery("#inline_calendar_checkout").datepicker("refresh"),"on"!=bkap_settings.booking_recurring_booking&&"on"!=bkap_settings.booking_specific_booking||"on"==bkap_settings.booking_enable_multiple_day?"on"==bkap_settings.booking_enable_multiple_day&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()&&(bkap_process_date(jQuery("#wapbk_hidden_date").val()),bkap_calculate_price()):""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&bkap_process_date(jQuery("#wapbk_hidden_date").val())})),jQuery("#manual-booking-qty").on("change",(function(){var bkap_settings=bkap_functions.bkap_settings();"on"==bkap_settings.booking_enable_multiple_day?""!=jQuery("#wapbk_hidden_date").val()&&""!=jQuery("#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery("#wapbk_hidden_date").val()?bkap_single_day_price():"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings)})),jQuery("#nyp").on("change",(function(){var bkap_settings=bkap_functions.bkap_settings();"on"==bkap_settings.booking_enable_multiple_day?""!=jQuery("#wapbk_hidden_date").val()&&""!=jQuery("#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery("#wapbk_hidden_date").val()?bkap_single_day_price():"on"==bkap_settings.booking_purchase_without_date&&bkap_purchase_without_date(settings)})),jQuery(document).ready((function(){jQuery("body").on("bkap_price_updated",(function(){jQuery("body").trigger("wc_currency_converter_calculate")}))})),jQuery("body").on("wc-measurement-price-calculator-update",(function(){"on"===JSON.parse(bkap_process_params.bkap_settings).booking_enable_multiple_day?""!=jQuery("#wapbk_hidden_date").val()&&""!=jQuery("#wapbk_hidden_date_checkout").val()&&bkap_calculate_price():""!=jQuery("#wapbk_hidden_date").val()&&bkap_single_day_price()})),jQuery(document).mousedown((function(event){event.target===jQuery("html")[0]&&event.clientX>=document.documentElement.offsetWidth&&(jQuery("#booking_calender").length>0&&jQuery("#booking_calender").blur(),jQuery("#booking_calender_checkout").length>0&&jQuery("#booking_calender_checkout").blur())})),jQuery(document).ready((function(){jQuery(document).on("click",".bkap_reset_dates",(function(){return bkap_reset_booking_details("rent"),!1}));let has_datepicker_override_process_started=!1;jQuery("#ui-datepicker-div").bind("DOMNodeInserted DOMNodeRemoved",(function(){if(!has_datepicker_override_process_started&&"undefined"!=typeof bkap_process_params){has_datepicker_override_process_started=!0;let calendar_theme=JSON.parse(bkap_process_params.global_settings).booking_themes,wordpress_theme=bkap_process_params.wordpress_theme,datepicker_header=jQuery(".ui-datepicker-header");calendar_theme.toLowerCase().indexOf("blitzer")>=0&&wordpress_theme.toLowerCase().indexOf("bellevue")>=0&&0!==datepicker_header.length&&datepicker_header.css("cssText","background: #cc0000 url(images/ui-bg_highlight-soft_15_cc0000_1x100.png) 50% 50% repeat-x  !important;border: 1px solid #e3a1a1 !important;font-weight: bold !important;color:#ffffff!important"),has_datepicker_override_process_started=!1}}))}));
