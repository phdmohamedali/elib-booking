let bkap_fullcalendar={};function bkap_load_calendar(){var calendarEl=document.getElementById("bkap-calendar"),product_ids=jQuery("#product_ids").val(),bkap_vendor_id=null!=bkap_calendar_view.bkap_vendor_id?bkap_calendar_view.bkap_vendor_id:"";bkap_fullcalendar=new FullCalendar.Calendar(calendarEl,{initialView:"timeGridWeek",slotMinTime:booking_calendar_params.timeslots[0],slotMaxTime:booking_calendar_params.timeslots[1],headerToolbar:{left:"prev,next,today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},navLinks:!0,dayMaxEvents:!0,events:"?bkapc_events=json"+bkap_vendor_id+"&product_ids="+product_ids,locale:booking_calendar_params.lang,loading:function(isLoading,view){1==isLoading?jQuery("#bkap_events_loader").show():0==isLoading&&jQuery("#bkap_events_loader").hide()},eventDidMount:function(info){"grey"===info.backgroundColor?jQuery(info.el).on("click",(function(){let title=info.event._def.title,date=info.event._instance.range,start_date=(date.start.getMonth()>8?date.start.getMonth()+1:"0"+(date.start.getMonth()+1))+"/"+(date.start.getDate()>9?date.start.getDate():"0"+date.start.getDate())+"/"+date.start.getFullYear().toString().substr(-2);date.end.setDate(date.end.getDate()-1);let end_date=(date.end.getMonth()>8?date.end.getMonth()+1:"0"+(date.end.getMonth()+1))+"/"+(date.end.getDate()>9?date.end.getDate():"0"+date.end.getDate())+"/"+date.end.getFullYear().toString().substr(-2);jQuery("#availability-start").datepicker("setDate",start_date),jQuery("#availability-end").datepicker("setDate",end_date),jQuery(".title").val(title),jQuery(".update-type").val("edit"),jQuery(".update-id").val(info.event.id),jQuery(".popup-overlay, .popup-content").addClass("active")})):jQuery(info.el).qtip({content:{text:bkap_calendar_view.loading,button:bkap_calendar_view.tip_close,ajax:{url:bkap_calendar_view.ajaxurl,type:"POST",data:{action:"bkap_booking_calender_content",order_id:info.event.id,event_value:info.event.extendedProps.value}}},show:{event:"click",solo:!0},position:{my:"bottom right",at:"top right"},hide:"unfocus",style:{classes:"qtip-light qtip-shadow"}})}})}document.addEventListener("DOMContentLoaded",(function(){bkap_load_calendar(),bkap_fullcalendar.render()})),jQuery(document).ready((function(){jQuery("#bkap_clr_products").length>0&&jQuery("#bkap_clr_products").select2({allowClear:!1,placeholder:"Select products...",width:"25%"}),jQuery("#calendar-filter").submit((function(){var product_ids="",pro_ids=[];jQuery.each(jQuery(this).serializeArray(),(function(){"bkap_clr_products[]"==this.name&&pro_ids.push(this.value)})),pro_ids.length>0&&(product_ids=pro_ids.join(",")),jQuery("#product_ids").val(product_ids);var bkap_vendor_id=null!=bkap_calendar_view.bkap_vendor_id?bkap_calendar_view.bkap_vendor_id:"";return eventSource=bkap_fullcalendar.getEventSources(),eventSource[0].remove(),bkap_fullcalendar.addEventSource("?bkapc_events=json"+bkap_vendor_id+"&product_ids="+product_ids),!1}))}));
