var bkap_functions=function($){return{attr_bookings_placed:function(settings){var attr_bookings_placed="";if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]&&jQuery("#"+attribute_list[i]).val()>0){var field_name="#wapbk_bookings_placed_"+attribute_list[i];jQuery(field_name).length>0&&(attr_bookings_placed=attr_bookings_placed+attribute_list[i]+","+jQuery(field_name).val()+";")}}return attr_bookings_placed},bkap_get_qty:function(id){let quantity=jQuery("input[class='input-text qty text']").prop("value");void 0===quantity&&jQuery("input[class='input-text qty text qodef-quantity-input']").length>0&&(quantity=jQuery("input[class='input-text qty text qodef-quantity-input']").prop("value"));let bkap_edit_params=window.bkap_edit_params;if(null!=bkap_edit_params&&""!=bkap_edit_params)if("checkout"==bkap_edit_params.bkap_page_type)quantity=bkap_edit_params.bkap_cart_item.quantity;else if("cart"==bkap_edit_params.bkap_page_type&&void 0!==id&&""!=id){let cart_key_id=(id=id.split("-"))[2].trim();quantity=jQuery("input[name='cart["+cart_key_id+"][qty]").prop("value")}return void 0===quantity&&(quantity=1),quantity},bkap_show_qty_and_cart:function(){jQuery(".single_add_to_cart_button").show(),jQuery('.quantity input[name="quantity"]').show()},bkap_enable_add_days_button:function(bkap_settings,global_settings){let bkap_add_days=document.getElementById("bkap-add-days");if(null!=bkap_add_days){bkap_add_days.removeAttribute("disabled");let m_type=bkap_settings.multidates_type,added_dates=document.getElementById("bkap-multidate-info").getElementsByTagName("tbody")[0].rows.length;if("fixed"==m_type){added_dates==parseInt(bkap_settings.multidates_fixed_number)&&bkap_multidates_allow_atc(global_settings)}else{let m_range_min=parseInt(bkap_settings.multidates_range_min);parseInt(bkap_settings.multidates_range_max);added_dates>=m_range_min&&bkap_multidates_allow_atc(global_settings)}}},bkap_hide_qty_and_cart:function(){jQuery(".single_add_to_cart_button").hide(),jQuery('.quantity input[name="quantity"]').hide()},bkap_disable_qty_and_cart:function(){jQuery(".single_add_to_cart_button").length&&jQuery(".single_add_to_cart_button").prop("disabled",!0),jQuery(".single_add_to_cart_button").length&&jQuery('.quantity input[name="quantity"]').prop("disabled",!0),jQuery(".single_add_to_cart_button").length&&jQuery(".plus").prop("disabled",!0),jQuery(".single_add_to_cart_button").length&&jQuery(".minus").prop("disabled",!0),jQuery(".qodef-quantity-plus").length>0&&(jQuery(".qodef-quantity-plus").prop("disabled",!0),jQuery(".qodef-quantity-minus").prop("disabled",!0)),jQuery(".bkap_create_booking").length&&jQuery(".bkap_create_booking").prop("disabled",!0)},bkap_enable_qty_and_cart:function(){jQuery(".single_add_to_cart_button").prop("disabled",!1),jQuery('.quantity input[name="quantity"]').prop("disabled",!1),jQuery(".plus").prop("disabled",!1),jQuery(".minus").prop("disabled",!1),jQuery(".qodef-quantity-plus").length>0&&(jQuery(".qodef-quantity-plus").prop("disabled",!1),jQuery(".qodef-quantity-minus").prop("disabled",!1)),jQuery(".bkap_create_booking").removeAttr("disabled")},bkap_hide_loader:function(modal_id){jQuery(modal_id+".ajax_img").hide()},settings:function(){return JSON.parse(bkap_process_params.additional_data)},bkap_settings:function(){return JSON.parse(bkap_process_params.bkap_settings)},bkap_labels:function(){return JSON.parse(bkap_process_params.labels)},global_settings:function(){return JSON.parse(bkap_process_params.global_settings)},update_GF_prices:function(){var options=0;"function"==typeof get_gravity_forms_price&&(options=get_gravity_forms_price(jQuery("#gform_form_id").val()));var booking_price_charged=$("#bkap_price_charged").val(),booking_price=0,pricing_obj=bkap_functions.update_option_prices("gf",options);$("#bkap_gf_options_total").val(pricing_obj.cart_options_total),booking_price=parseFloat(pricing_obj.total_booking_price)>parseFloat(booking_price_charged)?$("#total_price_calculated").val():$("#bkap_price_charged").val()-pricing_obj.options_total,setTimeout((function(){if("undefined"!=typeof wc_gravityforms_params&&($(".formattedBasePrice").length>0&&$(".formattedBasePrice").html(bkap_functions.bkap_format_money(wc_gravityforms_params,parseFloat(booking_price))),$(".formattedVariationTotal").length>0&&$(".formattedVariationTotal").html(bkap_functions.bkap_format_money(wc_gravityforms_params,parseFloat(pricing_obj.options_total))),$(".formattedTotalPrice").length>0)){var formatted_total=parseFloat(booking_price)+parseFloat(pricing_obj.options_total);$(".formattedTotalPrice").html(bkap_functions.bkap_format_money(wc_gravityforms_params,formatted_total))}}),1010)},doc_ready_other_plugin_actions:function(){bkap_functions.global_settings(),bkap_functions.bkap_settings(),bkap_functions.settings(),bkap_functions.bkap_labels();jQuery("#product-addons-total").length>0&&jQuery(".cart").on("keyup change",".wc-pao-addon input, .wc-pao-addon textarea",(function(){bkap_functions.bkap_call_price_calculation()})).on("change",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select",(function(){bkap_functions.bkap_call_price_calculation()})).on("click",".wc-pao-addon-image-swatch",(function(e){bkap_functions.bkap_call_price_calculation()}))},bkap_call_price_calculation:function(){""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&""!=jQuery(MODAL_ID+"#wapbk_hidden_date_checkout").val()?bkap_calculate_price():""!=jQuery(MODAL_ID+"#wapbk_hidden_date").val()&&bkap_single_day_price()},update_wpa_multiple_prices:function(bkap_settings,global_settings,settings,bkap_labels){var html="",diff_days=$("#wapbk_diff_days").val(),quantity=parseInt($('input[class="input-text qty text"]').prop("value"));"yes"==settings.sold_individually&&(quantity=1),""==diff_days&&(diff_days=1);var price_per_qty=jQuery("#bkap_price_charged").val()/quantity;jQuery("#product-addons-total").data("price",price_per_qty);var formatted_sub_total=0,$totals=$("body").find("#product-addons-total");if(null!=bkap_settings.booking_partial_payment_radio&&"security_deposit"==bkap_settings.booking_partial_payment_radio?total_booking_price=parseFloat($("#bkap_price_charged").val()):total_booking_price=parseFloat($("#total_price_calculated").val()),"undefined"!=typeof woocommerce_addons_params){var options=$totals.data("price_data"),sub_total_string=void 0===$totals.data("i18n_sub_total")?woocommerce_addons_params.i18n_sub_total:$totals.data("i18n_sub_total");for(c_key in formatted_sub_total=total_booking_price,options)"on"==global_settings.woo_product_addon_price&&(options[c_key].cost=options[c_key].cost*diff_days),formatted_sub_total+=options[c_key].cost;settings.partial_deposit_addon&&bkap_settings.booking_partial_payment_enable&&"yes"===bkap_settings.booking_partial_payment_enable&&"full_payment"!=$("input[name='payment_type']:checked").val()&&("percent"==bkap_settings.booking_partial_payment_radio?deposit_price=parseFloat(formatted_sub_total)*(parseFloat(bkap_settings.booking_partial_payment_value_deposit)/100):deposit_price=parseFloat($("#bkap_price_charged").val())),formatted_sub_total=bkap_functions.bkap_format_money(woocommerce_addons_params,formatted_sub_total);var productName=$(".wc-pao-addon-container").data("product-name"),productPrice=bkap_functions.bkap_format_money(woocommerce_addons_params,total_booking_price);html='<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+quantity+woocommerce_addons_params.quantity_symbol+productName+'</strong></div><div class="wc-pao-col2"><strong>'+productPrice+"</strong></div></li>";void 0!==options&&options.length&&($.each(options,(function(i,addon){if("quantity_based"===addon.price_type){var formattedValue=0===addon.cost?"-":bkap_functions.bkap_format_money(woocommerce_addons_params,addon.cost);html=html+'<li class="wc-pao-row-quantity-based"><div class="wc-pao-col1">'+addon.name+'</div><div class="wc-pao-col2"><span class="amount">'+formattedValue+"</span></div></li>"}})),$.each(options,(function(i,addon){if("quantity_based"!==addon.price_type){var formattedValue=0===addon.cost?"-":'<span class="amount">'+bkap_functions.bkap_format_money(woocommerce_addons_params,addon.cost)+"</span>";html=html+'<li><div class="wc-pao-col1"><strong>'+addon.name+'</strong></div><div class="wc-pao-col2">'+formattedValue+"</div></li>"}}))),html=html+'<li class="wc-pao-subtotal-line"><p class="price">'+sub_total_string+' <span class="amount">'+formatted_sub_total+"</span></p></li>",settings.partial_deposit_addon&&bkap_settings.booking_partial_payment_enable&&"yes"===bkap_settings.booking_partial_payment_enable&&"full_payment"!=$("input[name='payment_type']:checked").val()&&(html=html+'<li class="wc-pao-subtotal-line"><p class="price">'+bkap_labels.bkap_deposit_amt_label+' <span class="amount">'+bkap_functions.bkap_format_money(woocommerce_addons_params,deposit_price)+"</span></p></li></ul></div>"),$totals.html(html)}$totals.data("addons-price")&&$("body").trigger("bkap_update_addon_prices",[bkap_process_params.bkap_cart_item_key,$totals.data("addons-price")])},update_wpa_prices:function(){$("#bkap_price_charged").val();var booking_price,pricing_obj,$totals=$("body").find("#product-addons-total"),html="",formatted_options="",formatted_total="",subtotal="",bkap_settings=JSON.parse(bkap_process_params.bkap_settings),options=$totals.data("addons-price");pricing_obj=bkap_functions.update_option_prices("wpa",options),null!=bkap_settings.booking_partial_payment_radio&&"security_deposit"==bkap_settings.booking_partial_payment_radio?hidden_field_price=$("#bkap_price_charged").val():hidden_field_price=$("#total_price_calculated").val(),booking_price=pricing_obj.options_total+parseFloat(hidden_field_price),"undefined"!=typeof woocommerce_addons_params&&(formatted_options=bkap_functions.bkap_format_money(woocommerce_addons_params,pricing_obj.options_total),formatted_total=bkap_functions.bkap_format_money(woocommerce_addons_params,booking_price),woocommerce_addons_params.i18n_grand_total?subtotal=woocommerce_addons_params.i18n_grand_total:woocommerce_addons_params.i18n_sub_total&&(subtotal=woocommerce_addons_params.i18n_sub_total),html=(html='<dl class="product-addon-totals"><dt>'+woocommerce_addons_params.i18n_addon_total+'</dt><dd><strong><span class="amount">'+formatted_options+"</span></strong></dd>")+"<dt>"+subtotal+'</dt><dd><strong><span class="amount">'+formatted_total+"</span></strong></dd></dl>",$totals.html(html))},update_option_prices:function(addon_type,options){var global_settings=JSON.parse(bkap_process_params.global_settings),total_booking_price=parseFloat($("#total_price_calculated ").val()),diff_days=$("#wapbk_diff_days").val(),quantity=$('input[class="input-text qty text"]').prop("value"),options_total=0,cart_options_total=0,bkap_setting="";return options>0&&(options_total=options),"gf"===addon_type?bkap_setting=global_settings.woo_gf_product_addon_option_price:"wpa"===addon_type&&(bkap_setting=global_settings.woo_product_addon_price),void 0===quantity&&(quantity=1),(cart_options_total=diff_days>1&&"on"===bkap_setting&&options_total>0?options_total=options*diff_days:options)>0&&(cart_options_total*=quantity),options_total>0&&(options_total*=quantity),total_booking_price+=options_total,$("body").trigger("bkap_update_addon_prices",[bkap_process_params.bkap_cart_item_key,options_total]),{cart_options_total:cart_options_total,options_total:options_total,total_booking_price:total_booking_price}},bkap_format_money:function(param_name,price){return accounting.formatMoney(parseFloat(price),{symbol:param_name.currency_format_symbol,decimal:param_name.currency_format_decimal_sep,thousand:param_name.currency_format_thousand_sep,precision:param_name.currency_format_num_decimals,format:param_name.currency_format})},bkap_get_composite_selections:function(){var components,component_id="",component_data={},selected_product="",selected_quantity="";for(var sub_comp in components=$(".component"))"object"==typeof components[sub_comp]&&$(components[sub_comp]).data("item_id")&&(component_id=$(components[sub_comp]).data("item_id"),selected_product=$('select[name="wccp_component_selection['+component_id+']"]').val(),$('input[name="wccp_component_quantity['+component_id+']"]').val()&&(selected_quantity=$('input[name="wccp_component_quantity['+component_id+']"]').val()),component_data[component_id]={},component_data[component_id].p_id=selected_product,component_data[component_id].qty=selected_quantity,$('input[name="wccp_variation_id['+component_id+']"]')&&""!==$('input[name="wccp_variation_id['+component_id+']"]').val()&&(component_data[component_id].v_id=$('input[name="wccp_variation_id['+component_id+']"]').val()));return component_data},bkap_init_inline:function(){var bkap_settings=bkap_functions.bkap_settings(),checkin_date=$("#wapbk_hidden_date").val(),days=$("#block_option_number_of_day").val(),checkin_date_obj=bkap_functions.bkap_create_date_obj(checkin_date),checkout_date=bkap_functions.bkap_add_days_to_date(checkin_date_obj,days);checkout_date=bkap_functions.bkap_checkout_mindate_day_check(checkout_date,bkap_settings),$("#inline_calendar_checkout").datepicker("option","minDate",checkout_date),$("#inline_calendar_checkout").datepicker("setDate",checkout_date),date=bkap_functions.bkap_create_date(checkout_date),jQuery("#wapbk_hidden_date_checkout").val(date),bkap_calculate_price()},bkap_create_date:function(date){var m=date.getMonth(),d=date.getDate(),y=date.getFullYear();return today=d+"-"+(m+1)+"-"+y,today},bkap_create_date_ymd:function(date){var m=date.getMonth(),d=date.getDate();return[date.getFullYear(),m<10?"0"+(m+1):m+1,d].join("-")},bkap_today_date:function(){var dt=new Date;return dt.getDate()+"-"+dt.getMonth()+"-"+dt.getFullYear()},bkap_create_date_obj:function(date){var min_date=date.split("-");return date=new Date(min_date[2],min_date[1]-1,min_date[0])},bkap_add_days_to_date:function(date,days){var result=new Date(date);return result.setDate(result.getDate()+parseInt(days)),result},bkap_init:function(){var min_date=jQuery("#wapbk_minimum_seach_date").val().split("-"),checkout_date=new Date(min_date[2],min_date[1],min_date[0]);jQuery("#booking_calender_checkout").datepicker("option","minDate",checkout_date)},bkap_hide_wc_notice:function(){jQuery(".woocommerce-error").length>0&&setTimeout((function(){jQuery(".woocommerce-error").remove()}),5e3)},bkap_date_utc:function(firstDate,secondDate){var firstDate_test=Date.UTC(firstDate.getFullYear(),firstDate.getMonth(),firstDate.getDate()),secondDate_test=Date.UTC(secondDate.getFullYear(),secondDate.getMonth(),secondDate.getDate());return Math.abs((firstDate_test.valueOf()-secondDate_test.valueOf())/864e5)},test_bkap_init:function(){var checkin_date=jQuery("#booking_calender").val(),days=jQuery("#block_option_number_of_day").val(),checkin_date_obj=bkap_functions.bkap_create_date_obj(checkin_date),checkout_date=bkap_functions.bkap_add_days_to_date(checkin_date_obj,days);date=bkap_functions.bkap_create_date(checkout_date),jQuery("#wapbk_hidden_date_checkout").val(date),jQuery("#booking_calender_checkout").datepicker("setDate",checkout_date),bkap_calculate_price()},bkap_init_inline_multiple:function(global_settings,bkap_settings,settings){if("on"===settings.wapbk_same_day){var checkin_date=jQuery("#inline_calendar").datepicker("getDate"),date_selected=checkin_date.getDate()+"-"+(checkin_date.getMonth()+1)+"-"+checkin_date.getFullYear();jQuery("#wapbk_hidden_date_checkout").val(date_selected)}else{var date_selected_checkout="",checkout_date="";jQuery("#wapbk_hidden_date_checkout").val()?date_selected_checkout=jQuery("#wapbk_hidden_date_checkout").val():(date_selected_checkout=(checkout_date=jQuery("#inline_calendar_checkout").datepicker("getDate")).getDate()+"-"+(checkout_date.getMonth()+1)+"-"+checkout_date.getFullYear(),jQuery("#wapbk_hidden_date_checkout").val(date_selected_checkout))}""!=date_selected&&""!=date_selected_checkout&&bkap_calculate_price()},bkap_checkout_mindate_day_check:function(minDate,bkap_settings){var specificDates=bkap_settings.booking_specific_date,weekdays=bkap_settings.booking_recurring,mindatecheck=!0,a=1;do{day="booking_weekday_"+minDate.getDay(),day_check=weekdays[day],"on"==day_check||a>7?mindatecheck=!1:(datejny=bkap_functions.bkap_create_date(minDate),datejny in specificDates?mindatecheck=!1:minDate.setDate(minDate.getDate()+1)),a++}while(mindatecheck);return minDate},bkap_check_disable_day_between_checkin_checkout:function(calculate,date,cdate,bkap_settings){var specificDates=bkap_settings.booking_specific_date,weekdays=bkap_settings.booking_recurring;let checkin_Date=date;for(var count=bkap_gd(checkin_Date,cdate,"days"),i=1;i<=count;i++){if(day="booking_weekday_"+checkin_Date.getDay(),day_check=weekdays[day],datejny=bkap_functions.bkap_create_date(checkin_Date),""==day_check&&!(datejny in specificDates)){calculate=!1;break}checkin_Date=new Date(bkap_ad(checkin_Date,1))}return calculate},bkap_check_booked_dates:function(date){var settings=JSON.parse(bkap_process_params.additional_data),global_settings=JSON.parse(bkap_process_params.global_settings),bkap_settings=JSON.parse(bkap_process_params.bkap_settings),labels=JSON.parse(bkap_process_params.labels),m=date.getMonth(),d=date.getDate(),y=date.getFullYear(),holidayDates="",bookedDatesCheckout="",bkap_disabled_dates=(holidayDates=JSON.parse("["+settings.holidays+"]"),JSON.parse("["+settings.bkap_disabled_dates+"]")),bookedDates=JSON.parse("["+settings.wapbk_hidden_booked_dates+"]");bookedDatesCheckout=JSON.parse("["+settings.wapbk_hidden_booked_dates_checkout+"]");null!=bkap_settings.booking_charge_per_day&&"on"==bkap_settings.booking_charge_per_day&&null!=bkap_settings.booking_same_day&&"on"==bkap_settings.booking_same_day&&(bookedDatesCheckout=bookedDates);var block_option_start_day=jQuery("#block_option_start_day").val(),disabled_checkin_week_days=(jQuery("#block_option_price").val(),"");settings.wapbk_block_checkin_weekdays&&(disabled_checkin_week_days=JSON.parse("["+settings.wapbk_block_checkin_weekdays+"]"));var disabled_checkout_week_days="";settings.wapbk_block_checkout_weekdays&&(disabled_checkout_week_days=JSON.parse("["+settings.wapbk_block_checkout_weekdays+"]"));var maximum_numbers_of_days=parseInt(settings.number_of_dates),id_booking=jQuery(this).attr("id"),bkap_rent=JSON.parse("["+settings.bkap_rent+"]"),specificDates=JSON.parse("["+settings.specific_dates+"]"),datejny=bkap_functions.bkap_create_date(date);if("booking_calender"==id_booking||"inline_calendar"==id_booking){for(iii=0;iii<bookedDates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bookedDates))return bkap_rent.length>0?[!1,"bkap-rent-date",labels.rent_label]:[!1,"bkap-unavailable-date",labels.unavailable_label];for(jjj=0;jjj<disabled_checkin_week_days.length;jjj++)if(-1!=jQuery.inArray(date.getDay(),disabled_checkin_week_days))return specificDates.length>0&&-1!=jQuery.inArray(datejny,specificDates)?[!0]:[!1,"bkap-blocked-date",labels.blocked_label];for(ii=0;ii<holidayDates.length;ii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,holidayDates))return[!1,"bkap-holiday-date",labels.holiday_label];for(ii=0;ii<bkap_disabled_dates.length;ii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bkap_disabled_dates))return[!1,"bkap-unavailable-date",labels.unavailable_label]}if("booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking){if(""!=jQuery("#wapbk_hidden_date").val()){let same_day_check=!0;if(settings.rental_system_addon&&(same_day_check=null==bkap_settings.booking_same_day||null!=bkap_settings.booking_same_day&&""==bkap_settings.booking_same_day),same_day_check){(split_c=jQuery("#wapbk_hidden_date").val().split("-"))[1]=split_c[1]-1;var CheckinDate=new Date(split_c[2],split_c[1],split_c[0]);if(bkap_functions.bkap_add_days_to_date(CheckinDate,1).getTime()===date.getTime())return[!0]}}for(iii=0;iii<bookedDatesCheckout.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bookedDatesCheckout))return[!1,"bkap-unavailable-date",labels.unavailable_label];for(jjj=0;jjj<disabled_checkout_week_days.length;jjj++)if(-1!=jQuery.inArray(date.getDay(),disabled_checkout_week_days))return specificDates.length>0&&-1!=jQuery.inArray(datejny,specificDates)?[!0]:[!1,"bkap-blocked-date",labels.blocked_label];if("on"==global_settings.booking_include_global_holidays)for(ii=0;ii<holidayDates.length;ii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,holidayDates))return[!1,"bkap-holiday-date",labels.holiday_label];if("on"!==global_settings.booking_include_global_holidays&&""!=jQuery("#wapbk_hidden_date").val()){var split_c,m1=d1=y1="";(split_c=jQuery("#wapbk_hidden_date").val().split("-"))[1]=split_c[1]-1;CheckinDate=new Date(split_c[2],split_c[1],split_c[0]);for(iii=1;iii<maximum_numbers_of_days;iii++){var res=CheckinDate.getTime()+24*iii*60*60*1e3,date_holidays=new Date(res);m1=date_holidays.getMonth(),d1=date_holidays.getDate(),y1=date_holidays.getFullYear();var k1=d1+"-"+(m1+1)+"-"+y1,f="false";if(-1!=jQuery.inArray(k1,holidayDates)&&(f="true"),"true"==f){var index=holidayDates.indexOf(k1);if(index>-1){holidayDates.splice(index,1);var next_date_str=date_holidays.getTime()+864e5;next_date=new Date(next_date_str),next_m1=next_date.getMonth(),next_d1=next_date.getDate(),next_y1=next_date.getFullYear();var next_k1=next_d1+"-"+(next_m1+1)+"-"+next_y1;holidayDates.push(next_k1)}break}}for(ii=0;ii<holidayDates.length;ii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,holidayDates))return[!1,"bkap-holiday-date",labels.holiday_label]}}if(null!=settings.wapbk_attribute_list){var attribute_list=settings.wapbk_attribute_list.split(",");for(i=0;i<attribute_list.length;i++)if(""!=attribute_list[i]){var field_name="#wapbk_lockout_"+attribute_list[i],lockoutdates="";if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(",");(dt=new Date).getMonth(),dt.getDate(),dt.getFullYear();if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates)&&jQuery("#"+attribute_list[i]).val()>0)return[!1,"bkap-booked-date",labels.booked_label]}field_name="#wapbk_lockout_checkout_"+attribute_list[i];if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(","),(dt=new Date).getMonth(),dt.getDate(),dt.getFullYear();if("booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates)&&jQuery("#"+attribute_list[i]).val()>0)return[!1,"bkap-booked-date",labels.booked_label]}}}var variation_id_selected=0,variation_by_name=document.getElementsByName("variation_id").length;jQuery(".variation_id").length>0?variation_id_selected=jQuery(".variation_id").val():variation_by_name>0&&(variation_id=document.getElementsByName("variation_id")[0].value);field_name="#wapbk_lockout_"+variation_id_selected;if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(","),(dt=new Date).getMonth(),dt.getDate(),dt.getFullYear();if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates))return[!1,"bkap-booked-date",labels.booked_label]}field_name="#wapbk_lockout_checkout_"+variation_id_selected;if(jQuery(field_name).val()){lockoutdates=jQuery(field_name).val().replace(/\"/g,"").split(","),(dt=new Date).getMonth(),dt.getDate(),dt.getFullYear();if("booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates))return[!1,"bkap-booked-date",labels.booked_label]}if("on"==bkap_settings._bkap_resource&&null!=settings.resource_ids&&-1!=jQuery.inArray(settings.product_type,["simple","variable","subscription","variable-subscription"]))if("bkap_automatic_resource"==settings.bkap_resource_assigned){var show_rdate=[];for(i=0;i<settings.resource_ids.length;i++){if(resource_id_selected=settings.resource_ids[i],wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_lockout_checkout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates_checkout,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],lockoutdates=(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")).concat(wapbk_resource_disaabled_dates),lockoutdatescheckout=(lockoutdatescheckout=JSON.parse("["+wapbk_resource_lockout_checkout+"]")).concat(wapbk_resource_disaabled_dates),"booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates)?show_rdate.push(!0):show_rdate.push(!1);if("booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking)for(iii=0;iii<lockoutdatescheckout.length;iii++)-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdatescheckout)?show_rdate.push(!0):show_rdate.push(!1)}if(0!=show_rdate.length&&-1==jQuery.inArray(!1,show_rdate))return[!1,"bkap-booked-date",labels.booked_label]}else{var resource_id_selected=0;if(jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").length>0){var lockoutdatescheckout;resource_id_selected=jQuery(MODAL_FORM_ID+"#bkap_front_resource_selection").val(),wapbk_resource_lockout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates,wapbk_resource_lockout_checkout=settings.bkap_booked_resource_data[resource_id_selected].bkap_locked_dates_checkout,wapbk_resource_disaabled_dates=settings.resource_disable_dates[resource_id_selected],lockoutdates=(lockoutdates=JSON.parse("["+wapbk_resource_lockout+"]")).concat(wapbk_resource_disaabled_dates),lockoutdatescheckout=(lockoutdatescheckout=JSON.parse("["+wapbk_resource_lockout_checkout+"]")).concat(wapbk_resource_disaabled_dates);var dt;(dt=new Date).getMonth(),dt.getDate(),dt.getFullYear();if("booking_calender"==id_booking||"inline_calendar"==id_booking)for(iii=0;iii<lockoutdates.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdates))return[!1,"bkap-booked-date",labels.booked_label];if("booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking)for(iii=0;iii<lockoutdatescheckout.length;iii++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,lockoutdatescheckout))return[!1,"bkap-booked-date",labels.booked_label]}}if("on"==bkap_settings.booking_enable_multiple_day){bkap_rent=JSON.parse("["+settings.bkap_rent+"]");for(i=0;i<bkap_rent.length;i++)if(-1!=jQuery.inArray(d+"-"+(m+1)+"-"+y,bkap_rent))return[!1,"bkap-unavailable-date",labels.unavailable_label]}if(void 0!==settings.fixed_ranges&&settings.fixed_ranges.length>0&&1!=fixed_range(date,id_booking))return[!1];if("on"==jQuery("#block_option_enabled").val()){if("booking_calender"==id_booking||"inline_calendar"==id_booking)return block_option_start_day==date.getDay()||"any_days"==block_option_start_day?[!0]:[!1];var checkin_date=$("#wapbk_hidden_date").val(),days=$("#block_option_number_of_day").val(),checkin_date_obj=bkap_functions.bkap_create_date_obj(checkin_date),bcc_date=bkap_functions.bkap_add_days_to_date(checkin_date_obj,days);if(null!=bcc_date){var checkout=bcc_date.getDate()+"-"+(bcc_date.getMonth()+1)+"-"+bcc_date.getFullYear();if(jQuery("#wapbk_hidden_date_checkout").val(checkout),"booking_calender_checkout"==id_booking||"inline_calendar_checkout"==id_booking)return Date.parse(bcc_date)===Date.parse(date)?[!0]:[!1]}}return[!0]}}}(jQuery);
